(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ace2c5d8"],{1596:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return l}));var r=a("b775");function n(e){return Object(r["a"])({url:"/store.Store/list",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/store.Store/add",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/store.Store/edit",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/store.Store/del",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/store.Store/status",method:"post",data:e})}},"8c56":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-store-manage"},["index"===e.type?a("Index",{on:{componentsChange:e.componentsChange}}):e._e(),"add"===e.type?a("Add",{on:{componentsChange:e.componentsChange}}):e._e(),"edit"===e.type?a("Edit",{on:{componentsChange:e.componentsChange}}):e._e()],1)},n=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-store-manage-index"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addStoreAdm}},[e._v("添加门店管理员")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",disabled:1!==e.Mix_tableData.selectionIds.length},on:{click:function(t){return e.editStoreAdm(e.Mix_tableData.selectionObj[0])}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.Mix_tableData.selectionIds.length},on:{click:function(t){return e.delStoreAdm(e.Mix_tableData.selectionIds)}}},[e._v("批量删除")]),a("el-select",{attrs:{placeholder:"选择门店",filterable:"",clearable:""},model:{value:e.tableData.store_id,callback:function(t){e.$set(e.tableData,"store_id",t)},expression:"tableData.store_id"}},e._l(e.storeList,(function(e){return a("el-option",{key:e.store_id,attrs:{label:e.store_name,value:e.store_id}})})),1),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"姓名",maxlength:"20"},model:{value:e.tableData.user_name,callback:function(t){e.$set(e.tableData,"user_name",t)},expression:"tableData.user_name"}}),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"手机号",maxlength:"11"},model:{value:e.tableData.mobile,callback:function(t){e.$set(e.tableData,"mobile",t)},expression:"tableData.mobile"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.submitSearch}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.resetData}},[e._v("重置")]),a("el-table",{staticClass:"mt15",attrs:{border:"",height:"calc(100vh - 225px)",data:e.Mix_tableData.list},on:{"selection-change":function(t){return e.$selectionChange(t,"store_admin_id")}}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"ID",prop:"store_admin_id"}}),a("el-table-column",{attrs:{label:"姓名",prop:"user_name"}}),a("el-table-column",{attrs:{label:"手机号",prop:"mobile"}}),a("el-table-column",{attrs:{label:"短信通知"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#c9c9c9","active-value":1,"inactive-value":0},on:{change:function(a){return e.smsChange(t.row)}},model:{value:t.row.sms_status,callback:function(a){e.$set(t.row,"sms_status",a)},expression:"scope.row.sms_status"}})]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#c9c9c9","active-value":1,"inactive-value":0},on:{change:function(a){return e.statusChange(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"操作",type:"action",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"mini"},on:{click:function(a){return e.editPwd(t.row.store_admin_id)}}},[e._v("修改密码")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.editStoreAdm(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.delStoreAdm([t.row.store_admin_id])}}},[e._v("删除")])]}}])})],1),a("Pagination",{attrs:{tableData:e.Mix_tableData,getList:e.getStoreAdminList},on:{pageChange:e.$pageChange}}),a("el-dialog",{attrs:{title:"修改密码",visible:e.editPwdDialog.show,width:"40%"},on:{"update:visible":function(t){return e.$set(e.editPwdDialog,"show",t)}}},[a("el-form",{ref:"editPwdDialog",attrs:{model:e.editPwdDialog.form,rules:e.editPwdDialog.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新密码",prop:"pw"}},[a("el-input",{attrs:{type:"password",maxlength:"30",placeholder:"请输入新密码"},model:{value:e.editPwdDialog.form.pw,callback:function(t){e.$set(e.editPwdDialog.form,"pw",t)},expression:"editPwdDialog.form.pw"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.hideEditPwdDialog}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitEditPwdDialog}},[e._v("确定")])],1)],1)],1)},o=[],i=a("c7eb"),l=a("1da1"),c=a("b775");function u(e){return Object(c["a"])({url:"/config.StoreAdmin/list",method:"post",data:e})}function m(e){return Object(c["a"])({url:"/config.StoreAdmin/add",method:"post",data:e})}function d(e){return Object(c["a"])({url:"/config.StoreAdmin/edit",method:"post",data:e})}function f(e){return Object(c["a"])({url:"/config.StoreAdmin/del",method:"post",data:e})}function b(e){return Object(c["a"])({url:"/config.StoreAdmin/editSmsStatus",method:"post",data:e})}function p(e){return Object(c["a"])({url:"/config.StoreAdmin/editStatus",method:"post",data:e})}function h(e){return Object(c["a"])({url:"/config.StoreAdmin/resetPw",method:"post",data:e})}var _=a("1596"),v={name:"admin-store-manage-index",data:function(){return{storeList:[],tableData:{store_id:"",user_name:"",mobile:""},editPwdDialog:{show:!1,form:{pw:"",store_admin_id:""},formRules:{pw:[{required:!0,message:"请输入密码"},{min:6,message:"密码至少输入6位"}]}}}},methods:{submitSearch:function(){this.Mix_tableData.currentPage=1,this.getStoreAdminList()},resetData:function(){this.tableData.store_id="",this.tableData.user_name="",this.tableData.mobile=""},submitEditPwdDialog:function(){var e=this;this.$refs["editPwdDialog"].validate(function(){var t=Object(l["a"])(Object(i["a"])().mark((function t(a){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,h(e.editPwdDialog.form).then((function(){e.$message.success("修改成功"),e.$refs["editPwdDialog"].resetFields(),e.editPwdDialog.show=!1}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},hideEditPwdDialog:function(){this.editPwdDialog.show=!1,this.$refs["editPwdDialog"].resetFields()},statusChange:function(e){var t=this;return Object(l["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,p({store_admin_id:e.store_admin_id,status:e.status}).then((function(){t.$message.success("修改成功"),t.getStoreAdminList()}));case 2:case"end":return a.stop()}}),a)})))()},smsChange:function(e){var t=this;return Object(l["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,b({store_admin_id:e.store_admin_id,sms_status:e.sms_status}).then((function(){t.$message.success("修改成功"),t.getStoreAdminList()}));case 2:case"end":return a.stop()}}),a)})))()},editPwd:function(e){this.editPwdDialog.show=!0,this.editPwdDialog.form.store_admin_id=e},addStoreAdm:function(){this.$emit("componentsChange","add")},editStoreAdm:function(e){var t=this;return Object(l["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("system-manage/store-admin-manage/setStoreAdminData",e);case 2:t.$emit("componentsChange","edit");case 3:case"end":return a.stop()}}),a)})))()},delStoreAdm:function(e){var t=this;this.$confirm("您确定要删除该管理员吗?","温馨提示",{type:"warning"}).then(Object(l["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f({store_admin_id:e}).then((function(){t.$message.success("删除成功"),t.Mix_tableData.currentPage=1,t.getStoreAdminList()}));case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))},getStoreAdminList:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u({page:e.Mix_tableData.currentPage,limit:e.Mix_tableData.pageSize,store_id:e.tableData.store_id,user_name:e.tableData.user_name,mobile:e.tableData.mobile}).then((function(t){e.Mix_tableData.list=t.list,e.Mix_tableData.total=t.count}));case 2:case"end":return t.stop()}}),t)})))()},getStoreList:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(_["e"])().then((function(t){e.storeList=t.list}));case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getStoreAdminList(),this.getStoreList()}},g=v,w=a("2877"),x=Object(w["a"])(g,s,o,!1,null,"67c5150c",null),k=x.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-store-manage-edit"},[a("el-button",{attrs:{icon:"el-icon-back"},on:{click:e.back}},[e._v("返回门店管理员列表")]),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"user_name"}},[a("el-input",{attrs:{placeholder:"请输入姓名",maxlength:"25"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号",maxlength:"11"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio",{attrs:{label:0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("禁用")]),a("el-radio",{attrs:{label:1},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("启用")])],1),a("el-form-item",{attrs:{label:"级别",prop:"level"}},[a("el-radio",{attrs:{label:1},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("普通管理")]),a("el-radio",{attrs:{label:0},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("超级管理")])],1),a("el-form-item",{attrs:{label:"短信通知",prop:"sms_status"}},[a("el-radio",{attrs:{label:0},model:{value:e.form.sms_status,callback:function(t){e.$set(e.form,"sms_status",t)},expression:"form.sms_status"}},[e._v("不通知")]),a("el-radio",{attrs:{label:1},model:{value:e.form.sms_status,callback:function(t){e.$set(e.form,"sms_status",t)},expression:"form.sms_status"}},[e._v("通知")])],1),a("el-form-item",{attrs:{label:"选择门店",prop:"store_id_arr"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择要管理的门店",filterable:""},model:{value:e.form.store_id_arr,callback:function(t){e.$set(e.form,"store_id_arr",t)},expression:"form.store_id_arr"}},e._l(e.storeList,(function(e){return a("el-option",{key:e.store_id,attrs:{label:e.store_name,value:e.store_id}})})),1)],1),a("el-form-item",[a("el-button",{on:{click:e.back}},[e._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即修改")])],1)],1)],1)],1)],1)},O=[],D=a("5530"),$=(a("498a"),a("ac1f"),a("00b4"),a("2f62")),y={name:"admin-store-manage-add",computed:Object(D["a"])({},Object($["c"])({storeAdminManage:function(e){return e["system-manage/store-admin-manage"].storeAdminManage}})),data:function(){var e=function(e,t,a){t.trim()||"user_name"===e.field&&a(new Error("请输入姓名")),a()},t=function(e,t,a){/^1[3456789]\d{9}$/.test(t)||a(new Error("请输入11位正确的手机号")),a()};return{storeList:[],form:{},formRules:{user_name:[{required:!0,message:"请输入姓名"},{validator:e}],mobile:[{required:!0,message:"请输入手机号"},{validator:t}],store_id_arr:[{required:!0,message:"请选择门店"}]}}},methods:{back:function(){this.$emit("componentsChange","index")},submit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(l["a"])(Object(i["a"])().mark((function t(a){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,d(e.form).then((function(){e.$message.success("修改成功"),e.back()}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getStoreList:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(_["e"])().then((function(t){e.storeList=t.list}));case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getStoreList(),this.form=this.storeAdminManage,delete this.form.pw}},S=y,A=Object(w["a"])(S,j,O,!1,null,"c03c774e",null),P=A.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-store-manage-add"},[a("el-button",{attrs:{icon:"el-icon-back"},on:{click:e.back}},[e._v("返回门店管理员列表")]),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"user_name"}},[a("el-input",{attrs:{placeholder:"请输入姓名",maxlength:"25"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号",maxlength:"11"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pw"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码",maxlength:"30"},model:{value:e.form.pw,callback:function(t){e.$set(e.form,"pw",t)},expression:"form.pw"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio",{attrs:{label:0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("禁用")]),a("el-radio",{attrs:{label:1},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("启用")])],1),a("el-form-item",{attrs:{label:"级别",prop:"level"}},[a("el-radio",{attrs:{label:1},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("普通管理")]),a("el-radio",{attrs:{label:0},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[e._v("超级管理")])],1),a("el-form-item",{attrs:{label:"短信通知",prop:"sms_status"}},[a("el-radio",{attrs:{label:0},model:{value:e.form.sms_status,callback:function(t){e.$set(e.form,"sms_status",t)},expression:"form.sms_status"}},[e._v("不通知")]),a("el-radio",{attrs:{label:1},model:{value:e.form.sms_status,callback:function(t){e.$set(e.form,"sms_status",t)},expression:"form.sms_status"}},[e._v("通知")])],1),a("el-form-item",{attrs:{label:"选择门店",prop:"store_id_arr"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择要管理的门店",filterable:""},model:{value:e.form.store_id_arr,callback:function(t){e.$set(e.form,"store_id_arr",t)},expression:"form.store_id_arr"}},e._l(e.storeList,(function(e){return a("el-option",{key:e.store_id,attrs:{label:e.store_name,value:e.store_id}})})),1)],1),a("el-form-item",[a("el-button",{on:{click:e.back}},[e._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即添加")])],1)],1)],1)],1)],1)},L=[],M={name:"admin-store-manage-add",data:function(){var e=function(e,t,a){t.trim()||"user_name"===e.field&&a(new Error("请输入姓名")),a()},t=function(e,t,a){/^1[3456789]\d{9}$/.test(t)||a(new Error("请输入11位正确的手机号")),a()};return{storeList:[],form:{user_name:"",mobile:"",pw:"",level:1,status:1,sms_status:0,store_id_arr:[]},formRules:{user_name:[{required:!0,message:"请输入姓名"},{validator:e}],mobile:[{required:!0,message:"请输入手机号"},{validator:t}],pw:[{required:!0,message:"请输入密码"},{min:6,message:"密码至少输入6位"}],store_id_arr:[{required:!0,message:"请选择门店"}]}}},methods:{back:function(){this.$emit("componentsChange","index")},submit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(l["a"])(Object(i["a"])().mark((function t(a){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,m(e.form).then((function(){e.$message.success("添加成功"),e.back()}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getStoreList:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(_["e"])().then((function(t){e.storeList=t.list}));case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getStoreList()}},E=M,q=Object(w["a"])(E,C,L,!1,null,"7461e6a8",null),I=q.exports,R={name:"admin-store-manage",data:function(){return{type:"index"}},methods:{componentsChange:function(e){this.type=e}},components:{Index:k,Edit:P,Add:I}},z=R,F=Object(w["a"])(z,r,n,!1,null,"7085b96e",null);t["default"]=F.exports}}]);