(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-387cdbad"],{"10f6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sell-drawer-manage"},["index"===e.type?n("Index",{on:{componentsChange:e.componentsChange}}):e._e(),"add"===e.type?n("Add",{on:{componentsChange:e.componentsChange}}):e._e(),"edit"===e.type?n("Edit",{on:{componentsChange:e.componentsChange}}):e._e(),"lattice"===e.type?n("LatticeManage",{on:{componentsChange:e.componentsChange}}):e._e()],1)},r=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sell-drawer-manage-index"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addSellDrawer}},[e._v("添加售货柜")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-edit",disabled:1!==e.Mix_tableData.selectionIds.length},on:{click:function(t){return e.editSellDrawer(e.Mix_tableData.selectionObj[0])}}},[e._v("编辑 ")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.Mix_tableData.selectionIds.length},on:{click:function(t){return e.delSellDrawer(e.Mix_tableData.selectionIds)}}},[e._v("批量删除 ")]),n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"售货柜名称",maxlength:"20",clearable:""},model:{value:e.tableData.public,callback:function(t){e.$set(e.tableData,"public",t)},expression:"tableData.public"}}),n("el-select",{attrs:{placeholder:"请选择门店名称",filterable:"",clearable:""},on:{change:e.storeChange},model:{value:e.tableData.store_id,callback:function(t){e.$set(e.tableData,"store_id",t)},expression:"tableData.store_id"}},e._l(e.storeArr,(function(e){return n("el-option",{key:e.store_id,attrs:{label:e.store_name,value:e.store_id}})})),1),n("el-select",{attrs:{placeholder:"请选择房间名称",filterable:"",clearable:""},model:{value:e.tableData.room_id,callback:function(t){e.$set(e.tableData,"room_id",t)},expression:"tableData.room_id"}},e._l(e.roomArr,(function(e){return n("el-option",{key:e.room_id,attrs:{label:e.room_name,value:e.room_id}})})),1),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchSubmit}},[e._v("查询")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:e.resetData}},[e._v("重置")]),n("el-table",{ref:"table",staticClass:"mt15",attrs:{border:"",height:"calc(100vh - 225px)",data:e.Mix_tableData.list},on:{"selection-change":function(t){return e.$selectionChange(t,"cabinet_id")}}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),n("el-table-column",{attrs:{label:"ID",prop:"cabinet_id"}}),n("el-table-column",{attrs:{label:"售货柜名称",prop:"cabinet_name"}}),n("el-table-column",{attrs:{label:"设备序列号",prop:"device_sn"}}),n("el-table-column",{attrs:{label:"所属门店",prop:"store_name"}}),n("el-table-column",{attrs:{label:"所属房间",prop:"room_name"}}),n("el-table-column",{attrs:{label:"操作",type:"action",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-receiving"},on:{click:function(n){return e.pageToLattice(t.row)}}},[e._v("商品格管理")]),n("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return e.editSellDrawer(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.delSellDrawer([t.row.cabinet_id])}}},[e._v("删除 ")])]}}])})],1),n("Pagination",{attrs:{tableData:e.Mix_tableData,getList:e.getSellDrawerList},on:{pageChange:e.$pageChange}})],1)},i=[],c=n("c7eb"),s=n("1da1"),l=n("1596"),u=n("eb4e"),d=n("b775");function m(e){return Object(d["a"])({url:"/cabinet.Cabinet/list",method:"post",data:e})}function b(e){return Object(d["a"])({url:"/cabinet.Cabinet/add",method:"post",data:e})}function f(e){return Object(d["a"])({url:"/cabinet.Cabinet/edit",method:"post",data:e})}function p(e){return Object(d["a"])({url:"/cabinet.Cabinet/del",method:"post",data:e})}var h={name:"sell-drawer-manage-index",data:function(){return{storeArr:[],roomArr:[],tableData:{store_id:"",room_id:"",public:""}}},methods:{resetData:function(){this.tableData.public="",this.tableData.store_id="",this.tableData.room_id="",this.roomArr=[]},editSellDrawer:function(e){var t=this;return Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("sell-drawer-manage/sell-drawer-manage/setSellDrawerManageData",e);case 2:t.$emit("componentsChange","edit");case 3:case"end":return n.stop()}}),n)})))()},addSellDrawer:function(){this.$emit("componentsChange","add")},searchSubmit:function(){this.Mix_tableData.currentPage=1,this.getSellDrawerList()},delSellDrawer:function(e){var t=this;this.$confirm("您确定要删除该售货柜吗?","温馨提示",{type:"warning"}).then(Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,p({cabinet_id:e}).then((function(){t.$message.success("删除成功"),t.Mix_tableData.currentPage=1,t.getSellDrawerList()}));case 2:case"end":return n.stop()}}),n)})))).catch((function(){}))},pageToLattice:function(e){var t=this;return Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("sell-drawer-manage/sell-drawer-manage/setSellDrawerManageData",e);case 2:t.$emit("componentsChange","lattice");case 3:case"end":return n.stop()}}),n)})))()},getSellDrawerList:function(){var e=this;return Object(s["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m({page:e.Mix_tableData.currentPage,limit:e.Mix_tableData.pageSize,public:e.tableData.public,store_id:e.tableData.store_id,room_id:e.tableData.room_id}).then((function(t){e.Mix_tableData.list=t.list,e.Mix_tableData.total=t.count}));case 2:case"end":return t.stop()}}),t)})))()},getStoreList:function(){var e=this;return Object(s["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["e"])().then((function(t){e.storeArr=t.list}));case 2:case"end":return t.stop()}}),t)})))()},storeChange:function(e){var t=this;return Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.tableData.room_id="",n.next=3,Object(u["k"])({store_id:e}).then((function(e){t.roomArr=e.list}));case 3:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getSellDrawerList(),this.getStoreList()}},g=h,_=n("2877"),v=Object(_["a"])(g,o,i,!1,null,"12d18548",null),w=v.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sell-drawer-manage-add"},[n("el-button",{attrs:{icon:"el-icon-back"},on:{click:e.back}},[e._v("返回售货柜列表")]),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:8}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"售货柜名称",prop:"cabinet_name"}},[n("el-input",{attrs:{placeholder:"请输入售货柜名称",maxlength:"25"},model:{value:e.form.cabinet_name,callback:function(t){e.$set(e.form,"cabinet_name",t)},expression:"form.cabinet_name"}})],1),n("el-form-item",{attrs:{label:"设备序列号",prop:"device_sn"}},[n("el-input",{attrs:{placeholder:"请输入设备序列号",maxlength:"25"},model:{value:e.form.device_sn,callback:function(t){e.$set(e.form,"device_sn",t)},expression:"form.device_sn"}})],1),n("el-form-item",{attrs:{label:"所属门店",prop:"store_id"}},[n("el-select",{attrs:{placeholder:"请选择门店名称",filterable:"",clearable:""},on:{change:e.storeChange},model:{value:e.form.store_id,callback:function(t){e.$set(e.form,"store_id",t)},expression:"form.store_id"}},e._l(e.storeArr,(function(e){return n("el-option",{key:e.store_id,attrs:{label:e.store_name,value:e.store_id}})})),1)],1),n("el-form-item",{attrs:{label:"所属房间",prop:"room_id"}},[n("el-select",{attrs:{placeholder:"请选择房间名称",filterable:"",clearable:""},model:{value:e.form.room_id,callback:function(t){e.$set(e.form,"room_id",t)},expression:"form.room_id"}},e._l(e.roomArr,(function(e){return n("el-option",{key:e.room_id,attrs:{label:e.room_name,value:e.room_id}})})),1)],1),n("el-form-item",[n("el-button",{on:{click:e.back}},[e._v("返回")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即添加")])],1)],1)],1)],1)],1)},x=[],k=(n("498a"),{name:"sell-drawer-manage-add",data:function(){var e=function(e,t,n){t.trim()||("cabinet_name"===e.field&&n(new Error("请输入售货柜名称")),"device_sn"===e.field&&n(new Error("请输入设备序列号"))),n()};return{storeArr:[],roomArr:[],form:{cabinet_name:"",device_sn:"",store_id:"",room_id:""},formRules:{cabinet_name:[{required:!0,message:"请输入售货柜名称"},{validator:e}],device_sn:[{required:!0,message:"请输入设备序列号"},{validator:e}],store_id:[{required:!0,message:"请选择门店名称"}],room_id:[{required:!0,message:"请输入房间名称"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(Object(c["a"])().mark((function t(n){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,b(e.form).then((function(){e.$message.success("添加成功"),e.back()}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},back:function(){this.$emit("componentsChange","index")},getStoreList:function(){var e=this;return Object(s["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["e"])().then((function(t){e.storeArr=t.list}));case 2:case"end":return t.stop()}}),t)})))()},storeChange:function(e){var t=this;return Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.form.room_id="",n.next=3,Object(u["k"])({store_id:e}).then((function(e){t.roomArr=e.list}));case 3:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getStoreList()}}),j=k,O=Object(_["a"])(j,y,x,!1,null,"c4f48e3e",null),D=O.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sell-drawer-manage-edit"},[n("el-button",{attrs:{icon:"el-icon-back"},on:{click:e.back}},[e._v("返回售货柜列表")]),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:8}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"售货柜名称",prop:"cabinet_name"}},[n("el-input",{attrs:{placeholder:"请输入售货柜名称",maxlength:"25"},model:{value:e.form.cabinet_name,callback:function(t){e.$set(e.form,"cabinet_name",t)},expression:"form.cabinet_name"}})],1),n("el-form-item",{attrs:{label:"设备序列号",prop:"device_sn"}},[n("el-input",{attrs:{placeholder:"请输入设备序列号",maxlength:"25"},model:{value:e.form.device_sn,callback:function(t){e.$set(e.form,"device_sn",t)},expression:"form.device_sn"}})],1),n("el-form-item",{attrs:{label:"所属门店",prop:"store_id"}},[n("el-select",{attrs:{placeholder:"请选择门店名称",filterable:"",clearable:""},on:{change:e.storeChange},model:{value:e.form.store_id,callback:function(t){e.$set(e.form,"store_id",t)},expression:"form.store_id"}},e._l(e.storeArr,(function(e){return n("el-option",{key:e.store_id,attrs:{label:e.store_name,value:e.store_id}})})),1)],1),n("el-form-item",{attrs:{label:"所属房间",prop:"room_id"}},[n("el-select",{attrs:{placeholder:"请选择房间名称",filterable:"",clearable:""},model:{value:e.form.room_id,callback:function(t){e.$set(e.form,"room_id",t)},expression:"form.room_id"}},e._l(e.roomArr,(function(e){return n("el-option",{key:e.room_id,attrs:{label:e.room_name,value:e.room_id}})})),1)],1),n("el-form-item",[n("el-button",{on:{click:e.back}},[e._v("返回")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即修改")])],1)],1)],1)],1)],1)},S=[],$=n("5530"),L=n("2f62"),M={name:"sell-drawer-manage-edit",computed:Object($["a"])({},Object(L["c"])({sellDrawerManage:function(e){return e["sell-drawer-manage/sell-drawer-manage"].sellDrawerManage}})),data:function(){var e=function(e,t,n){t.trim()||("cabinet_name"===e.field&&n(new Error("请输入售货柜名称")),"device_sn"===e.field&&n(new Error("请输入设备序列号"))),n()};return{storeArr:[],roomArr:[],form:{},formRules:{cabinet_name:[{required:!0,message:"请输入售货柜名称"},{validator:e}],device_sn:[{required:!0,message:"请输入设备序列号"},{validator:e}],store_id:[{required:!0,message:"请选择门店名称"}],room_id:[{required:!0,message:"请输入房间名称"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(Object(c["a"])().mark((function t(n){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,f(e.form).then((function(){e.$message.success("修改成功"),e.back()}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},back:function(){this.$emit("componentsChange","index")},getStoreList:function(){var e=this;return Object(s["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["e"])().then((function(t){e.storeArr=t.list}));case 2:case"end":return t.stop()}}),t)})))()},getRoomList:function(){var e=this;return Object(s["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["k"])({store_id:e.sellDrawerManage.store_id}).then((function(t){e.roomArr=t.list}));case 2:case"end":return t.stop()}}),t)})))()},storeChange:function(e){var t=this;return Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.form.room_id="",n.next=3,Object(u["k"])({store_id:e}).then((function(e){t.roomArr=e.list}));case 3:case"end":return n.stop()}}),n)})))()}},mounted:function(){var e=this;return Object(s["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form=e.sellDrawerManage,t.next=3,e.getStoreList();case 3:return t.next=5,e.getRoomList();case 5:case"end":return t.stop()}}),t)})))()}},R=M,E=Object(_["a"])(R,C,S,!1,null,"ffe99eba",null),A=E.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lattice-manage"},["index"===e.type?n("Index",{on:{back:e.back,componentsChange:e.componentsChange}}):e._e(),"add"===e.type?n("Add",{on:{componentsChange:e.componentsChange}}):e._e(),"edit"===e.type?n("Edit",{on:{componentsChange:e.componentsChange}}):e._e()],1)},q=[],U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lattice-manage-index"},[n("el-button",{attrs:{icon:"el-icon-back"},on:{click:e.back}},[e._v("返回售货柜列表")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addLattice}},[e._v("添加商品格")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-edit",disabled:1!==e.Mix_tableData.selectionIds.length},on:{click:function(t){return e.editLattice(e.Mix_tableData.selectionObj[0])}}},[e._v("编辑 ")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.Mix_tableData.selectionIds.length},on:{click:function(t){return e.delLattice(e.Mix_tableData.selectionIds)}}},[e._v("批量删除 ")]),n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"商品格标题",maxlength:"20",clearable:""},on:{clear:e.searchSubmit},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchSubmit(t)}},model:{value:e.tableData.public,callback:function(t){e.$set(e.tableData,"public",t)},expression:"tableData.public"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchSubmit}},[e._v("查询")]),n("el-tag",{attrs:{type:"primary"}},[e._v("当前售货柜："+e._s(e.sellDrawerManage.cabinet_name))]),n("el-table",{ref:"table",staticClass:"mt15",attrs:{border:"",height:"calc(100vh - 225px)",data:e.Mix_tableData.list},on:{"selection-change":function(t){return e.$selectionChange(t,"goods_id")}}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),n("el-table-column",{attrs:{label:"编号",prop:"cabinet_number",width:"100"}}),n("el-table-column",{attrs:{label:"主图",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-image",{attrs:{src:e.baseUrl+t.row.goods_image,fit:"cover",alt:"","preview-src-list":[e.baseUrl+t.row.goods_image]}})]}}])}),n("el-table-column",{attrs:{label:"标题",prop:"goods_name"}}),n("el-table-column",{attrs:{label:"库存",prop:"stock"}}),n("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(n){e.$set(t.row,"status",n)},expression:"scope.row.status"}})]}}])}),n("el-table-column",{attrs:{label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.goods_price)+"元 ")]}}])}),n("el-table-column",{attrs:{label:"操作",type:"action",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return e.editLattice(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return e.delLattice([t.row.goods_id])}}},[e._v("删除 ")])]}}])})],1),n("Pagination",{attrs:{tableData:e.Mix_tableData,getList:e.getLatticeList},on:{pageChange:e.$pageChange}})],1)},T=[];function z(e){return Object(d["a"])({url:"/cabinet.Goods/list",method:"post",data:e})}function P(e){return Object(d["a"])({url:"/cabinet.Goods/add",method:"post",data:e})}function V(e){return Object(d["a"])({url:"/cabinet.Goods/del",method:"post",data:e})}function B(e){return Object(d["a"])({url:"/cabinet.Goods/edit",method:"post",data:e})}function G(e){return Object(d["a"])({url:"/cabinet.Goods/status",method:"post",data:e})}var K={name:"lattice-manage-index",computed:Object($["a"])({},Object(L["c"])({sellDrawerManage:function(e){return e["sell-drawer-manage/sell-drawer-manage"].sellDrawerManage}})),data:function(){return{tableData:{public:""}}},methods:{back:function(){this.$emit("back","index")},editLattice:function(e){var t=this;return Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("sell-drawer-manage/lattice-manage/setLatticeManageData",e);case 2:t.$emit("componentsChange","edit");case 3:case"end":return n.stop()}}),n)})))()},searchSubmit:function(){this.Mix_tableData.currentPage=1,this.getLatticeList()},addLattice:function(){this.$emit("componentsChange","add")},delLattice:function(e){var t=this;this.$confirm("您确定要删除该商品格吗?","温馨提示",{type:"warning"}).then(Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,V({goods_id:e}).then((function(){t.$message.success("删除成功"),t.Mix_tableData.currentPage=1,t.getLatticeList()}));case 2:case"end":return n.stop()}}),n)})))).catch((function(){}))},changeStatus:function(e){var t=this;return Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,G({goods_id:e.goods_id,status:e.status}).then((function(){t.$message.success("修改成功"),t.getLatticeList()}));case 2:case"end":return n.stop()}}),n)})))()},getLatticeList:function(){var e=this;return Object(s["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z({page:e.Mix_tableData.currentPage,limit:e.Mix_tableData.pageSize,public:e.tableData.public,cabinet_id:e.sellDrawerManage.cabinet_id}).then((function(t){e.Mix_tableData.list=t.list,e.Mix_tableData.total=t.count}));case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getLatticeList()}},F=K,N=Object(_["a"])(F,U,T,!1,null,"e7b27428",null),J=N.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lattice-manage-add"},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:24}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"当前售货柜"}},[n("el-tag",{attrs:{type:"primary"}},[e._v(e._s(e.sellDrawerManage.cabinet_name))])],1),n("el-form-item",{attrs:{label:"商品格编号",prop:"cabinet_number"}},[n("el-input",{attrs:{placeholder:"请输入商品格编号",maxlength:"25"},model:{value:e.form.cabinet_number,callback:function(t){e.$set(e.form,"cabinet_number",t)},expression:"form.cabinet_number"}})],1),n("el-form-item",{attrs:{label:"商品格标题",prop:"goods_name"}},[n("el-input",{attrs:{placeholder:"请输入商品格标题",maxlength:"25"},model:{value:e.form.goods_name,callback:function(t){e.$set(e.form,"goods_name",t)},expression:"form.goods_name"}})],1),n("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[n("el-input-number",{attrs:{precision:2,min:0,max:1e6},model:{value:e.form.goods_price,callback:function(t){e.$set(e.form,"goods_price",t)},expression:"form.goods_price"}}),n("el-tag",{attrs:{type:"primary"}},[e._v("元")])],1),n("el-form-item",{attrs:{label:"商品格主图",prop:"goods_image"}},[n("el-upload",{attrs:{action:e.uploadURL,"list-type":"picture-card",limit:1,"on-remove":e.removeUpload,"on-success":e.uploadSuccess}},[n("i",{staticClass:"el-icon-plus"})]),n("el-tag",{attrs:{type:"warning"}},[e._v("仅限上传一张")])],1),n("el-form-item",{attrs:{label:"商品介绍"}},[n("tinymce",{ref:"tinymce",attrs:{height:300},model:{value:e.form.goods_about,callback:function(t){e.$set(e.form,"goods_about",t)},expression:"form.goods_about"}})],1),n("el-form-item",[n("el-button",{on:{click:e.back}},[e._v("返回商品格列表")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即添加")])],1)],1)],1)],1)],1)},X=[],H=n("8256"),Q={name:"lattice-manage-add",components:{Tinymce:H["a"]},computed:Object($["a"])({},Object(L["c"])({sellDrawerManage:function(e){return e["sell-drawer-manage/sell-drawer-manage"].sellDrawerManage}})),data:function(){var e=function(e,t,n){t.trim()||("cabinet_number"===e.field&&n(new Error("请输入商品格编号")),"goods_name"===e.field&&n(new Error("请输入商品格标题"))),n()};return{form:{cabinet_number:"",goods_name:"",goods_price:"",goods_image:"",goods_about:""},formRules:{cabinet_number:[{required:!0,message:"请输入商品格编号"},{validator:e}],goods_name:[{required:!0,message:"请输入商品格标题"},{validator:e}],goods_price:[{required:!0,message:"请输入商品价格"}]}}},methods:{back:function(){this.$emit("componentsChange","index")},uploadSuccess:function(e){this.form.goods_image=e.data},removeUpload:function(){this.form.goods_image=""},submit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(Object(c["a"])().mark((function t(n){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,P(Object($["a"])(Object($["a"])({},e.form),{},{cabinet_id:e.sellDrawerManage.cabinet_id})).then((function(){e.$message.success("添加成功"),e.back()}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},Y=Q,Z=Object(_["a"])(Y,W,X,!1,null,"031ef7ea",null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lattice-manage-edit"},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:24}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"当前售货柜"}},[n("el-tag",{attrs:{type:"primary"}},[e._v(e._s(e.sellDrawerManage.cabinet_name))])],1),n("el-form-item",{attrs:{label:"商品格编号",prop:"cabinet_number"}},[n("el-input",{attrs:{placeholder:"请输入商品格编号",maxlength:"25"},model:{value:e.form.cabinet_number,callback:function(t){e.$set(e.form,"cabinet_number",t)},expression:"form.cabinet_number"}})],1),n("el-form-item",{attrs:{label:"商品格标题",prop:"goods_name"}},[n("el-input",{attrs:{placeholder:"请输入商品格标题",maxlength:"25"},model:{value:e.form.goods_name,callback:function(t){e.$set(e.form,"goods_name",t)},expression:"form.goods_name"}})],1),n("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[n("el-input-number",{attrs:{precision:2,min:0,max:1e6},model:{value:e.form.goods_price,callback:function(t){e.$set(e.form,"goods_price",t)},expression:"form.goods_price"}}),n("el-tag",{attrs:{type:"primary"}},[e._v("元")])],1),n("el-form-item",{attrs:{label:"商品格主图",prop:"goods_image"}},[n("el-upload",{attrs:{action:e.uploadURL,"list-type":"picture-card",limit:1,"file-list":e.fileList,"on-remove":e.removeUpload,"on-success":e.uploadSuccess}},[n("i",{staticClass:"el-icon-plus"})]),n("el-tag",{attrs:{type:"warning"}},[e._v("仅限上传一张")])],1),n("el-form-item",{attrs:{label:"商品介绍"}},[n("tinymce",{ref:"tinymce",attrs:{height:300},model:{value:e.form.goods_about,callback:function(t){e.$set(e.form,"goods_about",t)},expression:"form.goods_about"}})],1),n("el-form-item",[n("el-button",{on:{click:e.back}},[e._v("返回商品格列表")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即修改")])],1)],1)],1)],1)],1)},ne=[],ae={name:"lattice-manage-edit",components:{Tinymce:H["a"]},computed:Object($["a"])({},Object(L["c"])({sellDrawerManage:function(e){return e["sell-drawer-manage/sell-drawer-manage"].sellDrawerManage},latticeManage:function(e){return e["sell-drawer-manage/lattice-manage"].latticeManage}})),data:function(){var e=function(e,t,n){(""+t).trim()||("cabinet_number"===e.field&&n(new Error("请输入商品格编号")),"goods_name"===e.field&&n(new Error("请输入商品格标题"))),n()};return{form:{},formRules:{cabinet_number:[{required:!0,message:"请输入商品格编号"},{validator:e}],goods_name:[{required:!0,message:"请输入商品格标题"},{validator:e}],goods_price:[{required:!0,message:"请输入商品价格"}]},fileList:[]}},methods:{back:function(){this.$emit("componentsChange","index")},uploadSuccess:function(e){this.form.goods_image=e.data},removeUpload:function(){this.form.goods_image=""},submit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(Object(c["a"])().mark((function t(n){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,B(Object($["a"])(Object($["a"])({},e.form),{},{cabinet_id:e.sellDrawerManage.cabinet_id})).then((function(){e.$message.success("修改成功"),e.back()}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},mounted:function(){this.form=this.latticeManage,this.fileList=[{name:"",url:this.baseUrl+this.form.goods_image}]}},re=ae,oe=Object(_["a"])(re,te,ne,!1,null,"4e0a056d",null),ie=oe.exports,ce={name:"lattice-manage",components:{Index:J,Add:ee,Edit:ie},data:function(){return{type:"index"}},methods:{back:function(e){this.$emit("componentsChange",e)},componentsChange:function(e){this.type=e}}},se=ce,le=Object(_["a"])(se,I,q,!1,null,"772d3f08",null),ue=le.exports,de={name:"sell-drawer-manage",components:{Index:w,Add:D,Edit:A,LatticeManage:ue},data:function(){return{type:"index"}},methods:{componentsChange:function(e){this.type=e}}},me=de,be=Object(_["a"])(me,a,r,!1,null,"d7d4ede4",null);t["default"]=be.exports},1596:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return s}));var a=n("b775");function r(e){return Object(a["a"])({url:"/store.Store/list",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/store.Store/add",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/store.Store/edit",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/store.Store/del",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/store.Store/status",method:"post",data:e})}},"23b0":function(e,t,n){},"5fb8":function(e,t,n){"use strict";n("8a83")},"6d30":function(e,t,n){"use strict";n("23b0")},8256:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1)])},r=[],o=(n("b680"),n("a9e3"),n("ac1f"),n("00b4"),n("d3b7"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("上传")]),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:e.uploadURL,"list-type":"picture-card"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确定")])],1)],1)}),i=[],c=(n("b64b"),n("d81d"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var n=t.uid,a=Object.keys(this.listObj),r=0,o=a.length;r<o;r++)if(this.listObj[a[r]].uid===n)return this.listObj[a[r]].url=this.baseUrl+e.data,void(this.listObj[a[r]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,n=Object.keys(this.listObj),a=0,r=n.length;a<r;a++)if(this.listObj[n[a]].uid===t)return void delete this.listObj[n[a]]},beforeUpload:function(e){var t=this,n=window.URL||window.webkitURL,a=e.uid;return this.listObj[a]={},new Promise((function(r,o){var i=new Image;i.src=n.createObjectURL(e),i.onload=function(){t.listObj[a]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},r(!0)}))}}}),s=c,l=(n("6d30"),n("2877")),u=Object(l["a"])(s,o,i,!1,null,"725214ba",null),d=u.exports,m=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],b=m,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],p=f,h=n("b85c"),g=[];function _(){return window.tinymce}var v=function(e,t){var n=document.getElementById(e),a=t||function(){};if(!n){var r=document.createElement("script");r.src=e,r.id=e,document.body.appendChild(r),g.push(a);var o="onload"in r?i:c;o(r)}function i(t){t.onload=function(){this.onerror=this.onload=null;var e,n=Object(h["a"])(g);try{for(n.s();!(e=n.n()).done;){var a=e.value;a(null,t)}}catch(r){n.e(r)}finally{n.f()}g=null},t.onerror=function(){this.onerror=this.onload=null,a(new Error("Failed to load "+e),t)}}function c(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,n=Object(h["a"])(g);try{for(n.s();!(t=n.n()).done;){var a=t.value;a(null,e)}}catch(r){n.e(r)}finally{n.f()}g=null}}}n&&a&&(_()?a(null,n):g.push(a))},w=v,y="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",x={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;w(y,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:p,menubar:this.menubar,plugins:b,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",n.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},convert_urls:!1})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){return window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))}))}}},k=x,j=(n("5fb8"),Object(l["a"])(k,a,r,!1,null,"d1b0fb02",null));t["a"]=j.exports},"8a83":function(e,t,n){},eb4e:function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"j",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"h",(function(){return f}));var a=n("b775");function r(e){return Object(a["a"])({url:"/room.Room/list",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/room.Room/add",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/room.Room/edit",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/room.Room/del",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/room.Room/copy",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/room.Room/status",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/room.Room/sort",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/room.Room/electricStopStatus",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/room.Room/electricStartStatus",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/room.Room/cancelStatus",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/room.Room/settlStatus",method:"post",data:e})}}}]);