(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07db1e49"],{8303:function(e,t,a){},"925a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shgsp-order-manage"},["index"===e.type?a("Index",{on:{componentsChange:e.componentsChange}}):e._e()],1)},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shgsp-order-manage-index"},[a("el-table",{attrs:{border:"",height:"calc(100vh - 170px)",data:e.Mix_tableData.list}},[a("el-table-column",{attrs:{label:"订单ID",prop:"order_id"}}),a("el-table-column",{attrs:{label:"订单号",prop:"order_sn"}}),a("el-table-column",{attrs:{label:"订单价格(元)",prop:"order_price"}}),a("el-table-column",{attrs:{label:"支付方式"},scopedSlots:e._u([{key:"default",fn:function(t){return["balance"===t.row.pay_type?a("div",{staticClass:"pay-type"},[a("span",{staticClass:"kj kj-qb"}),e._v("钱包余额")]):e._e(),"wechat"===t.row.pay_type?a("div",{staticClass:"pay-type"},[a("span",{staticClass:"kj kj-wechat"}),e._v("微信")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[3===t.row.order_status?a("el-tag",{attrs:{type:"primary"}},[e._v("已完成")]):e._e(),4===t.row.order_status?a("el-tag",{attrs:{type:"danger"}},[e._v("已取消")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"售货柜锁状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.orderCabinet.lock_status?a("el-tag",{attrs:{type:"danger"}},[e._v("异常")]):e._e(),1===t.row.orderCabinet.lock_status?a("el-tag",{attrs:{type:"success"}},[e._v("正常")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"商品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.checkGoods(t.row)}}},[e._v("查看")])]}}])}),a("el-table-column",{attrs:{label:"购买用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top-end",width:"400",trigger:"click"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"昵称"}},[e._v(e._s(t.row.member.nick_name))]),a("el-form-item",{attrs:{label:"头像"}},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.member.avatar_url,fit:"cover","preview-src-list":[t.row.member.avatar_url]}})],1),a("el-form-item",{attrs:{label:"电话"}},[e._v(e._s(t.row.member.mobile))]),a("el-form-item",{attrs:{label:"地址"}},[e._v(e._s(t.row.member.province))])],1),a("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"操作",type:"action",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[3===t.row.order_status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.cancelOrder(t.row.order_id)}}},[e._v("取消订单")]):e._e()]}}])})],1),a("Pagination",{attrs:{tableData:e.Mix_tableData,getList:e.getSHGSPOrderList},on:{pageChange:e.$pageChange}}),a("el-drawer",{attrs:{title:"商品信息",visible:e.drawer.show,direction:"ltr"},on:{"update:visible":function(t){return e.$set(e.drawer,"show",t)}}},[a("el-form",{staticStyle:{"padding-left":"20px","padding-right":"20px"},attrs:{"label-width":"120upx"}},[a("el-form-item",{attrs:{label:"售货柜编码"}},[e._v(e._s(e.drawer.data.orderCabinet.goods_info.cabinet_number))]),a("el-form-item",{attrs:{label:"售货柜名称"}},[e._v(e._s(e.drawer.data.orderCabinet.goods_info.cabinet.cabinet_name))]),a("el-form-item",{attrs:{label:"商品图片"}},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.baseUrl+e.drawer.data.orderCabinet.goods_info.goods_image,fit:"cover","preview-src-list":[e.baseUrl+e.drawer.data.orderCabinet.goods_info.goods_image]}})],1),a("el-form-item",{attrs:{label:"商品名称"}},[e._v(e._s(e.drawer.data.orderCabinet.goods_info.goods_name))])],1)],1)],1)},s=[],i=a("c7eb"),l=a("1da1"),c=a("b775");function d(e){return Object(c["a"])({url:"/order.Cabinet/list",method:"post",data:e})}function u(e){return Object(c["a"])({url:"/order.Cabinet/cancel",method:"post",data:e})}var b={name:"shgsp-order-manage-index",data:function(){return{drawer:{show:!1,data:{orderCabinet:{goods_info:{cabinet:{}}}}}}},methods:{checkGoods:function(e){this.drawer.data=e,this.drawer.show=!0},cancelOrder:function(e){var t=this;this.$confirm("您确定要取消该订单吗?","温馨提示",{type:"warning"}).then(Object(l["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u({order_id:e}).then((function(){t.$message.success("已取消"),t.Mix_tableData.currentPage=1,t.getSHGSPOrderList()}));case 2:case"end":return a.stop()}}),a)})))).catch((function(){}))},getSHGSPOrderList:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d({page:e.Mix_tableData.currentPage,limit:e.Mix_tableData.pageSize}).then((function(t){e.Mix_tableData.list=t.list,e.Mix_tableData.total=t.count}));case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getSHGSPOrderList()}},p=b,m=(a("9981"),a("2877")),_=Object(m["a"])(p,o,s,!1,null,"a5e92136",null),f=_.exports,g={name:"shgsp-order-manage",components:{Index:f},data:function(){return{type:"index"}},methods:{componentsChange:function(e){this.type=e}}},h=g,w=Object(m["a"])(h,r,n,!1,null,"387a62ec",null);t["default"]=w.exports},9981:function(e,t,a){"use strict";a("8303")}}]);