{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\store-manage\\room-manage\\room-manage-edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\store-manage\\room-manage\\room-manage-edit.vue","mtime":1686935646983},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js","mtime":1686936410308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgbWFwU3RhdGUKfSBmcm9tICd2dWV4JwppbXBvcnQgVGlueW1jZSBmcm9tICdAL2NvbXBvbmVudHMvVGlueW1jZScKaW1wb3J0IHsKICBlZGl0Um9vbQp9IGZyb20gIkAvYXBpL3N0b3JlLW1hbmFnZS9yb29tLW1hbmFnZSIKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAicm9vbS1tYW5hZ2UtZWRpdCIsCiAgY29tcG9uZW50czogewogICAgVGlueW1jZQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKHsKICAgICAgc3RvcmVNYW5hZ2U6IHN0YXRlID0+IHN0YXRlWydzdG9yZS1tYW5hZ2Uvc3RvcmUtbWFuYWdlJ10uc3RvcmVNYW5hZ2UsCiAgICAgIHJvb21NYW5hZ2U6IHN0YXRlID0+IHN0YXRlWydzdG9yZS1tYW5hZ2Uvcm9vbS1tYW5hZ2UnXS5yb29tTWFuYWdlCiAgICB9KQogIH0sCiAgZGF0YSgpIHsKICAgIC8vIOmqjOivgeepugogICAgY29uc3QgdmFsaWRhdGVFbXB0eSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKCF2YWx1ZS50cmltKCkpIHsKICAgICAgICBpZiAocnVsZS5maWVsZCA9PT0gJ3Jvb21fbmFtZScpIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5oi/6Ze05ZCN56ewJykpCiAgICAgICAgfQogICAgICAgIGlmIChydWxlLmZpZWxkID09PSAncm9vbV9sYWJlbCcpIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5oi/6Ze05qCH562+JykpCiAgICAgICAgfQogICAgICB9CiAgICAgIGNhbGxiYWNrKCkKICAgIH0KICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICB3b3JrX3dlZWs6IFtdCiAgICAgIH0sCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgYmF0Y2hGaWxlTGlzdDogW10sCiAgICAgIGZvcm1SdWxlczogewogICAgICAgIHN0YXJ0X3RpbWVfc2xvdDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeiQpeS4muW8gOWni+aXtumXtCcKICAgICAgICB9XSwKICAgICAgICBlbmRfdGltZV9zbG90OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup6JCl5Lia57uT5p2f5pe26Ze0JwogICAgICAgIH1dLAogICAgICAgIHdvcmtfd2VlazogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeW3peS9nOaXpScKICAgICAgICB9XSwKICAgICAgICByb29tX2xhYmVsOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5oi/6Ze05qCH562+JwogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVFbXB0eQogICAgICAgIH1dLAogICAgICAgIHN0YXJ0aW5nX3RpbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXotbforqLml7bplb8nCiAgICAgICAgfV0sCiAgICAgICAgcm9vbV9uYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5oi/6Ze05ZCN56ewJwogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVFbXB0eQogICAgICAgIH1dLAogICAgICAgIHJvb21fcHJpY2U6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmiL/pl7TljZXku7cnCiAgICAgICAgfV0sCiAgICAgICAgcm9vbV9kZXBvc2l0OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5oi/6Ze05oq86YeRJwogICAgICAgIH1dLAogICAgICAgIHJvb21fc2l6ZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaIv+mXtOmdouenrycKICAgICAgICB9XSwKICAgICAgICByb29tX3Blb3BsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaIv+mXtOWuuee6s+S6uuaVsCcKICAgICAgICB9XSwKICAgICAgICByb29tX3NvbGQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlt7LllK7mlbDph48nCiAgICAgICAgfV0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsgLy8g5paH5Lu25LiK5Lyg5YmN6ZKp5a2QCiAgICAgIGNvbnN0IGlzSnBnT3JQbmcgPSBmaWxlLnR5cGUgPT09ICdpbWFnZS9qcGVnJyB8fCBmaWxlLnR5cGUgPT09ICdpbWFnZS9wbmcnIC8v5Zu+54mH5qC85byP5piv5ZCm5Li6cG5n5oiWanBnCiAgICAgIGNvbnN0IGlzTHQxME0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDEwIC8v5Yik5pat5Zu+54mH5aSn5bCP5piv5ZCm6LaF6L+HMTBNQgogICAgICBpZiAoIWlzSnBnT3JQbmcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlofku7bmoLzlvI/plJnor6/vvIEnKQogICAgICB9IGVsc2UgaWYoIWlzTHQxME0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlofku7bkuI3og73otoXov4cxME3vvIEnKQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCkKICAgICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCkKICAgICAgICAgIGltYWdlLm9ubG9hZCA9IChpbWFnZUV2ZW50KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgIGNvbnN0IG9yaWdpbldpZHRoID0gaW1hZ2Uud2lkdGgKICAgICAgICAgICAgY29uc3Qgb3JpZ2luSGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0CiAgICAgICAgICAgIC8vIOacgOWkp+WwuuWvuOmZkOWItu+8jOWPr+mAmui/h+iuvue9ruWuvemrmOadpeWunueOsOWbvueJh+WOi+e8qeeoi+W6pgogICAgICAgICAgICBsZXQgbWF4V2lkdGggPSAxMTI1LCBtYXhIZWlnaHQgPSAxMTI1CiAgICAgICAgICAgIC8vIOebruagh+WwuuWvuAogICAgICAgICAgICBsZXQgdGFyZ2V0V2lkdGggPSBvcmlnaW5XaWR0aCwgdGFyZ2V0SGVpZ2h0ID0gb3JpZ2luSGVpZ2h0CiAgICAgICAgICAgIC8vIOWbvueJh+WwuuWvuOi2hei/hzgwMHg4MDDnmoTpmZDliLYKICAgICAgICAgICAgaWYgKG9yaWdpbldpZHRoID4gbWF4V2lkdGggfHwgb3JpZ2luSGVpZ2h0ID4gbWF4SGVpZ2h0KSB7CiAgICAgICAgICAgICAgaWYgKG9yaWdpbldpZHRoIC8gb3JpZ2luSGVpZ2h0ID4gbWF4V2lkdGggLyBtYXhIZWlnaHQpIHsKICAgICAgICAgICAgICAgIC8vIOabtOWuve+8jOaMieeFp+WuveW6pumZkOWumuWwuuWvuAogICAgICAgICAgICAgICAgdGFyZ2V0V2lkdGggPSBtYXhXaWR0aDsKICAgICAgICAgICAgICAgIHRhcmdldEhlaWdodCA9IE1hdGgucm91bmQobWF4V2lkdGggKiAob3JpZ2luSGVpZ2h0IC8gb3JpZ2luV2lkdGgpKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGFyZ2V0SGVpZ2h0ID0gbWF4SGVpZ2h0OwogICAgICAgICAgICAgICAgdGFyZ2V0V2lkdGggPSBNYXRoLnJvdW5kKG1heEhlaWdodCAqIChvcmlnaW5XaWR0aCAvIG9yaWdpbkhlaWdodCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYW52YXMud2lkdGggPSB0YXJnZXRXaWR0aAogICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdGFyZ2V0SGVpZ2h0CiAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRhcmdldFdpZHRoLCB0YXJnZXRIZWlnaHQpCiAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCB0YXJnZXRXaWR0aCwgdGFyZ2V0SGVpZ2h0KQogICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIDAuOSkKICAgICAgICAgICAgY29uc3QgYmxvYkRhdGEgPSBfdGhpcy5kYXRhVVJJdG9CbG9iKGRhdGFVcmwsICdpbWFnZS9qcGVnJykKICAgICAgICAgICAgcmVzb2x2ZShibG9iRGF0YSkKICAgICAgICAgIH0KICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSA9PiB7IGltYWdlLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDsgfSkKICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpCiAgICAgICAgfSkKICAgICAgfQogICAgICByZXR1cm4gaXNKcGdPclBuZyAmJiBpc0x0MTBNCiAgICB9LAogICAgZGF0YVVSSXRvQmxvYihkYXRhVVJJLCB0eXBlKSB7CiAgICAgIHZhciBiaW5hcnkgPSBhdG9iKGRhdGFVUkkuc3BsaXQoJywnKVsxXSk7CiAgICAgIHZhciBhcnJheSA9IFtdOwogICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYmluYXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgYXJyYXkucHVzaChiaW5hcnkuY2hhckNvZGVBdChpKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG5ldyBCbG9iKFtuZXcgVWludDhBcnJheShhcnJheSldLCB7dHlwZTogdHlwZX0pOwogICAgfSwKCiAgICAvLyDkuIrkvKDlm77niYfmiJDlip/nmoTpkqnlrZAKICAgIHVwbG9hZFN1Y2Nlc3MocmVzKSB7CiAgICAgIHRoaXMuZm9ybS5yb29tX2ltYWdlID0gcmVzLmRhdGEKICAgIH0sCiAgICAvLyDliKDpmaTkuIrkvKDmiL/pl7TkuLvlm74KICAgIHJlbW92ZVVwbG9hZCgpIHsKICAgICAgdGhpcy5mb3JtLnJvb21faW1hZ2UgPSAnJwogICAgfSwKICAgIC8vIOWIoOmZpOaJuemHj+S4iuS8oOeahOWbvueJhwogICAgcmVtb3ZlQmF0Y2hVcGxvYWQocmVzKSB7CiAgICAgIGxldCBpZHggPSAwCiAgICAgIGlmIChyZXMucmVzcG9uc2UpIHsKICAgICAgICBpZHggPSB0aGlzLmZvcm0ucm9vbV9pbWFnZXMuaW5kZXhPZihyZXMucmVzcG9uc2UuZGF0YSkKICAgICAgfSBlbHNlIHsKICAgICAgICBpZHggPSB0aGlzLmZvcm0ucm9vbV9pbWFnZXMuaW5kZXhPZihyZXMudXJsLnNwbGl0KHRoaXMuYmFzZVVybClbMV0pCiAgICAgIH0KICAgICAgdGhpcy5mb3JtLnJvb21faW1hZ2VzLnNwbGljZShpZHgsIDEpCiAgICB9LAogICAgLy8g5om56YeP5LiK5Lyg5oiQ5Yqf55qE6ZKp5a2QCiAgICBiYXRjaFVwbG9hZFN1Y2Nlc3MocmVzKSB7CiAgICAgIHRoaXMuZm9ybS5yb29tX2ltYWdlcy5wdXNoKHJlcy5kYXRhKQogICAgfSwKICAgIC8vIOi/lOWbnuaIv+mXtOWIl+ihqAogICAgYmFjaygpIHsKICAgICAgdGhpcy4kZW1pdCgnY29tcG9uZW50c0NoYW5nZScsICdpbmRleCcpCiAgICB9LAogICAgLy8g5o+Q5LqkCiAgICBzdWJtaXQoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBhd2FpdCBlZGl0Um9vbSh7CiAgICAgICAgICAgIC4uLnRoaXMuZm9ybSwKICAgICAgICAgICAgc3RvcmVfaWQ6IHRoaXMuc3RvcmVNYW5hZ2Uuc3RvcmVfaWQKICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpCiAgICAgICAgICAgIHRoaXMuYmFjaygpCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgLy8g5Yid5aeL5YyW5Zu+54mHCiAgICBpbml0RmlsZUxpc3QoKSB7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHVybDogdGhpcy5iYXNlVXJsICsgdGhpcy5mb3JtLnJvb21faW1hZ2UKICAgICAgfV0KICAgICAgdGhpcy5mb3JtLnJvb21faW1hZ2VzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgdGhpcy5iYXRjaEZpbGVMaXN0LnB1c2goewogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICB1cmw6IHRoaXMuYmFzZVVybCArIGl0ZW0KICAgICAgICB9KQogICAgICB9KQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZm9ybSA9IHRoaXMucm9vbU1hbmFnZQogICAgdGhpcy5pbml0RmlsZUxpc3QoKQogIH0KfQo="},{"version":3,"sources":["room-manage-edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyJA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"room-manage-edit.vue","sourceRoot":"src/views/store-manage/room-manage","sourcesContent":["<template>\r\n  <div class=\"room-manage-edit\">\r\n    <el-row type=\"flex\" justify=\"center\">\r\n      <el-col :span=\"24\">\r\n        <el-form ref=\"form\" :model=\"form\" :rules=\"formRules\" label-width=\"120px\">\r\n          <el-form-item label=\"当前门店名称\">\r\n            <el-tag type=\"primary\">{{ storeManage.store_name }}</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"房间名称\" prop=\"room_name\">\r\n            <el-input placeholder=\"请输入房间名称\" v-model=\"form.room_name\" maxlength=\"20\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"房间主图\" prop=\"room_image\">\r\n            <el-upload :action=\"uploadURL\" list-type=\"picture-card\" :limit=\"1\" :file-list=\"fileList\"\r\n                       :before-upload=\"beforeUpload\"   :on-remove=\"removeUpload\" :on-success=\"uploadSuccess\">\r\n              <i class=\"el-icon-plus\"></i>\r\n            </el-upload>\r\n            <el-tag type=\"warning\">仅限上传一张</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"房间单价\" prop=\"room_price\">\r\n            <el-input-number v-model=\"form.room_price\" :precision=\"2\" :step=\"1\" :min=\"0\" :max=\"100000\">\r\n            </el-input-number>\r\n            <el-tag type=\"primary\">元</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"房间押金\" prop=\"room_deposit\">\r\n            <el-input-number v-model=\"form.room_deposit\" :precision=\"2\" :step=\"1\" :min=\"0\" :max=\"100000\">\r\n            </el-input-number>\r\n            <el-tag type=\"primary\">元</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"房间面积\" prop=\"room_size\">\r\n            <el-input-number v-model=\"form.room_size\" :precision=\"2\" :step=\"1\" :min=\"1\" :max=\"10000\"\r\n              controls-position=\"right\"></el-input-number>\r\n            <el-tag type=\"primary\">平方米</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"可容纳人数\" prop=\"room_people\">\r\n            <el-input-number v-model=\"form.room_people\" :step=\"1\" :min=\"1\" :max=\"10000\"></el-input-number>\r\n            <el-tag type=\"primary\">人</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"展示排序\" prop=\"sort\">\r\n            <el-input v-model=\"form.sort\" maxlength=\"5\" @input=\"form.sort = Number(form.sort.replace(/[^\\d]/g,''))\">\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"预定类型\" prop=\"room_type\">\r\n            <el-radio-group v-model=\"form.room_type\">\r\n              <el-radio :label=\"1\">按小时</el-radio>\r\n              <el-radio :label=\"2\">按天数</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"起订时长\" prop=\"starting_time\" v-if=\"form.room_type !== 3\">\r\n            <el-input-number v-model=\"form.starting_time\" :precision=\"0\" :min=\"1\" :max=\"10000\"></el-input-number>\r\n            <el-tag type=\"primary\" v-if=\"form.room_type === 1\">小时</el-tag>\r\n            <el-tag type=\"primary\" v-if=\"form.room_type === 2\">天</el-tag>\r\n          </el-form-item>\r\n          <template v-if=\"form.room_type === 2\">\r\n            <el-form-item label=\"开始时间\" prop=\"start_time_slot\">\r\n              <el-time-select v-model=\"form.start_time_slot\" :picker-options=\"{\r\n                  start: '00:00',\r\n                  step: '00:30',\r\n                  end: '24:00'\r\n                }\" placeholder=\"开始时间\">\r\n              </el-time-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"结束时间\" prop=\"end_time_slot\">\r\n              <el-time-select v-model=\"form.end_time_slot\" :picker-options=\"{\r\n                  start: '00:00',\r\n                  step: '00:30',\r\n                  end: '24:00'\r\n                }\" placeholder=\"结束时间\">\r\n              </el-time-select>\r\n            </el-form-item>\r\n          </template>\r\n          <el-form-item label=\"自动通电\" prop=\"electric_status\">\r\n            <el-radio v-model=\"form.electric_status\" :label=\"0\">否</el-radio>\r\n            <el-radio v-model=\"form.electric_status\" :label=\"1\">是</el-radio>\r\n          </el-form-item>\r\n          <el-form-item label=\"自动关电\" prop=\"electric_stop_status\">\r\n            <el-radio v-model=\"form.electric_stop_status\" :label=\"0\">否</el-radio>\r\n            <el-radio v-model=\"form.electric_stop_status\" :label=\"1\">是</el-radio>\r\n          </el-form-item>\r\n          <!-- <el-form-item label=\"可否结算\" prop=\"settlement_status\">\r\n            <el-radio v-model=\"form.settlement_status\" :label=\"0\">否</el-radio>\r\n            <el-radio v-model=\"form.settlement_status\" :label=\"1\">是</el-radio>\r\n          </el-form-item> -->\r\n          <el-form-item label=\"大门\" prop=\"dm_status\">\r\n            <el-radio v-model=\"form.dm_status\" :label=\"0\">无</el-radio>\r\n            <el-radio v-model=\"form.dm_status\" :label=\"1\">有</el-radio>\r\n          </el-form-item>\r\n          <el-form-item label=\"已售\" prop=\"room_sold\">\r\n            <el-input-number v-model=\"form.room_sold\" :precision=\"0\" :step=\"1\" :min=\"0\" :max=\"9999999\"></el-input-number>\r\n          </el-form-item>\r\n          <!-- <el-form-item prop=\"room_type\">\r\n            <el-tooltip slot=\"label\" effect=\"dark\" content=\"不同客户是否可在同一时间预定该房间\" placement=\"top-start\">\r\n              <div>重复预定 <span class=\"el-icon-question\"></span></div>\r\n            </el-tooltip>\r\n            <el-radio v-model=\"form.reserve_status\" :label=\"0\">不可重复</el-radio>\r\n            <el-radio v-model=\"form.reserve_status\" :label=\"1\">可重复</el-radio>\r\n          </el-form-item> -->\r\n          <el-form-item label=\"房间标签\" prop=\"room_label\">\r\n            <el-input v-model=\"form.room_label\" maxlength=\"10\" placeholder=\"例如:舞蹈房、健身房等\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"房间展示图\">\r\n            <el-upload :action=\"uploadURL\" list-type=\"picture-card\" multiple :limit=\"5\" :file-list=\"batchFileList\"\r\n                       :before-upload=\"beforeUpload\"   :on-remove=\"removeBatchUpload\" :on-success=\"batchUploadSuccess\">\r\n              <i class=\"el-icon-plus\"></i>\r\n            </el-upload>\r\n            <el-tag type=\"warning\">最多上传5张，建议尺寸 750 x 375</el-tag>\r\n          </el-form-item>\r\n          <!-- <el-form-item label=\"营业开始时间\" prop=\"work_time_start\">\r\n            <el-time-select placeholder=\"起始时间\" v-model=\"form.work_time_start\" :picker-options=\"{\r\n                start: '00:00',\r\n                step: '00:30',\r\n                end: '24:00',\r\n                maxTime: form.work_time_end\r\n              }\">\r\n            </el-time-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"营业结束时间\" prop=\"work_time_end\">\r\n            <el-time-select placeholder=\"结束时间\" v-model=\"form.work_time_end\" :picker-options=\"{\r\n                start: '00:00',\r\n                step: '00:30',\r\n                end: '24:00',\r\n                minTime: form.work_time_start\r\n              }\">\r\n            </el-time-select>\r\n          </el-form-item> -->\r\n          <!-- <el-form-item label=\"工作日\" prop=\"work_week\">\r\n            <el-checkbox-group v-model=\"form.work_week\">\r\n              <el-checkbox label=\"1\">星期一</el-checkbox>\r\n              <el-checkbox label=\"2\">星期二</el-checkbox>\r\n              <el-checkbox label=\"3\">星期三</el-checkbox>\r\n              <el-checkbox label=\"4\">星期四</el-checkbox>\r\n              <el-checkbox label=\"5\">星期五</el-checkbox>\r\n              <el-checkbox label=\"6\">星期六</el-checkbox>\r\n              <el-checkbox label=\"7\">星期日</el-checkbox>\r\n            </el-checkbox-group>\r\n          </el-form-item> -->\r\n          <!-- <el-form-item label=\"用户可取消房间\" prop=\"cancel_status\">\r\n            <el-radio v-model=\"form.cancel_status\" :label=\"0\">否</el-radio>\r\n            <el-radio v-model=\"form.cancel_status\" :label=\"1\">是</el-radio>\r\n          </el-form-item> -->\r\n          <el-form-item label=\"房间介绍\" prop=\"room_about\">\r\n            <tinymce ref=\"tinymce\" v-model=\"form.room_about\" :height=\"300\" />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button @click=\"back\">返回房间列表</el-button>\r\n            <el-button type=\"primary\" @click=\"submit\">立即修改</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    mapState\r\n  } from 'vuex'\r\n  import Tinymce from '@/components/Tinymce'\r\n  import {\r\n    editRoom\r\n  } from \"@/api/store-manage/room-manage\"\r\n\r\n  export default {\r\n    name: \"room-manage-edit\",\r\n    components: {\r\n      Tinymce\r\n    },\r\n    computed: {\r\n      ...mapState({\r\n        storeManage: state => state['store-manage/store-manage'].storeManage,\r\n        roomManage: state => state['store-manage/room-manage'].roomManage\r\n      })\r\n    },\r\n    data() {\r\n      // 验证空\r\n      const validateEmpty = (rule, value, callback) => {\r\n        if (!value.trim()) {\r\n          if (rule.field === 'room_name') {\r\n            callback(new Error('请输入房间名称'))\r\n          }\r\n          if (rule.field === 'room_label') {\r\n            callback(new Error('请输入房间标签'))\r\n          }\r\n        }\r\n        callback()\r\n      }\r\n      return {\r\n        form: {\r\n          work_week: []\r\n        },\r\n        fileList: [],\r\n        batchFileList: [],\r\n        formRules: {\r\n          start_time_slot: [{\r\n            required: true,\r\n            message: '请选择营业开始时间'\r\n          }],\r\n          end_time_slot: [{\r\n            required: true,\r\n            message: '请选择营业结束时间'\r\n          }],\r\n          work_week: [{\r\n            required: true,\r\n            message: '请选择工作日'\r\n          }],\r\n          room_label: [{\r\n            required: true,\r\n            message: '请输入房间标签'\r\n          }, {\r\n            validator: validateEmpty\r\n          }],\r\n          starting_time: [{\r\n            required: true,\r\n            message: '请输入起订时长'\r\n          }],\r\n          room_name: [{\r\n            required: true,\r\n            message: '请输入房间名称'\r\n          }, {\r\n            validator: validateEmpty\r\n          }],\r\n          room_price: [{\r\n            required: true,\r\n            message: '请输入房间单价'\r\n          }],\r\n          room_deposit: [{\r\n            required: true,\r\n            message: '请输入房间押金'\r\n          }],\r\n          room_size: [{\r\n            required: true,\r\n            message: '请输入房间面积'\r\n          }],\r\n          room_people: [{\r\n            required: true,\r\n            message: '请输入房间容纳人数'\r\n          }],\r\n          room_sold: [{\r\n            required: true,\r\n            message: '请输入已售数量'\r\n          }]\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      beforeUpload(file) { // 文件上传前钩子\r\n        const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png' //图片格式是否为png或jpg\r\n        const isLt10M = file.size / 1024 / 1024 < 10 //判断图片大小是否超过10MB\r\n        if (!isJpgOrPng) {\r\n          this.$message.error('文件格式错误！')\r\n        } else if(!isLt10M) {\r\n          this.$message.error('文件不能超过10M！')\r\n        } else {\r\n          const _this = this\r\n          return new Promise(resolve => {\r\n            const reader = new FileReader()\r\n            const image = new Image()\r\n            image.onload = (imageEvent) => {\r\n              const canvas = document.createElement('canvas');\r\n              const context = canvas.getContext('2d');\r\n              const originWidth = image.width\r\n              const originHeight = image.height\r\n              // 最大尺寸限制，可通过设置宽高来实现图片压缩程度\r\n              let maxWidth = 1125, maxHeight = 1125\r\n              // 目标尺寸\r\n              let targetWidth = originWidth, targetHeight = originHeight\r\n              // 图片尺寸超过800x800的限制\r\n              if (originWidth > maxWidth || originHeight > maxHeight) {\r\n                if (originWidth / originHeight > maxWidth / maxHeight) {\r\n                  // 更宽，按照宽度限定尺寸\r\n                  targetWidth = maxWidth;\r\n                  targetHeight = Math.round(maxWidth * (originHeight / originWidth));\r\n                } else {\r\n                  targetHeight = maxHeight;\r\n                  targetWidth = Math.round(maxHeight * (originWidth / originHeight));\r\n                }\r\n              }\r\n              canvas.width = targetWidth\r\n              canvas.height = targetHeight\r\n              context.clearRect(0, 0, targetWidth, targetHeight)\r\n              context.drawImage(image, 0, 0, targetWidth, targetHeight)\r\n              const dataUrl = canvas.toDataURL('image/jpeg', 0.9)\r\n              const blobData = _this.dataURItoBlob(dataUrl, 'image/jpeg')\r\n              resolve(blobData)\r\n            }\r\n            reader.onload = (e => { image.src = e.target.result; })\r\n            reader.readAsDataURL(file)\r\n          })\r\n        }\r\n        return isJpgOrPng && isLt10M\r\n      },\r\n      dataURItoBlob(dataURI, type) {\r\n        var binary = atob(dataURI.split(',')[1]);\r\n        var array = [];\r\n        for(var i = 0; i < binary.length; i++) {\r\n          array.push(binary.charCodeAt(i));\r\n        }\r\n        return new Blob([new Uint8Array(array)], {type: type});\r\n      },\r\n\r\n      // 上传图片成功的钩子\r\n      uploadSuccess(res) {\r\n        this.form.room_image = res.data\r\n      },\r\n      // 删除上传房间主图\r\n      removeUpload() {\r\n        this.form.room_image = ''\r\n      },\r\n      // 删除批量上传的图片\r\n      removeBatchUpload(res) {\r\n        let idx = 0\r\n        if (res.response) {\r\n          idx = this.form.room_images.indexOf(res.response.data)\r\n        } else {\r\n          idx = this.form.room_images.indexOf(res.url.split(this.baseUrl)[1])\r\n        }\r\n        this.form.room_images.splice(idx, 1)\r\n      },\r\n      // 批量上传成功的钩子\r\n      batchUploadSuccess(res) {\r\n        this.form.room_images.push(res.data)\r\n      },\r\n      // 返回房间列表\r\n      back() {\r\n        this.$emit('componentsChange', 'index')\r\n      },\r\n      // 提交\r\n      submit() {\r\n        this.$refs['form'].validate(async valid => {\r\n          if (valid) {\r\n            await editRoom({\r\n              ...this.form,\r\n              store_id: this.storeManage.store_id\r\n            }).then(() => {\r\n              this.$message.success('修改成功')\r\n              this.back()\r\n            })\r\n          } else {\r\n            return false\r\n          }\r\n        })\r\n      },\r\n      // 初始化图片\r\n      initFileList() {\r\n        this.fileList = [{\r\n          name: '',\r\n          url: this.baseUrl + this.form.room_image\r\n        }]\r\n        this.form.room_images.forEach(item => {\r\n          this.batchFileList.push({\r\n            name: '',\r\n            url: this.baseUrl + item\r\n          })\r\n        })\r\n      }\r\n    },\r\n    mounted() {\r\n      this.form = this.roomManage\r\n      this.initFileList()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}