{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\order-manage\\room-order-manage\\room-order-manage-index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\order-manage\\room-order-manage\\room-order-manage-index.vue","mtime":1686935646976},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js","mtime":1686936410308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFJvb21PcmRlckxpc3R9IGZyb20gIkAvYXBpL29yZGVyLW1hbmFnZS9yb29tLW9yZGVyLW1hbmFnZSINCmltcG9ydCB7Z2V0U3RvcmVMaXN0fSBmcm9tICJAL2FwaS9zdG9yZS1tYW5hZ2Uvc3RvcmUtbWFuYWdlIg0KaW1wb3J0IHtnZXRSb29tTGlzdH0gZnJvbSAiQC9hcGkvc3RvcmUtbWFuYWdlL3Jvb20tbWFuYWdlIg0KaW1wb3J0IHtyZXR1cm5EZXBvc2l0fSBmcm9tICJAL2FwaS9vcmRlci1tYW5hZ2Uvcm9vbS1vcmRlci1tYW5hZ2UiDQppbXBvcnQge2NhbmNlbE9yZGVyfSBmcm9tICJAL2FwaS9vcmRlci1tYW5hZ2Uvcm9vbS1vcmRlci1tYW5hZ2UiDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInJvb20tb3JkZXItbWFuYWdlLWluZGV4IiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6Zeo5bqX5pWw5o2uDQogICAgICBzdG9yZUFycjogW10sDQogICAgICAvLyDmiL/pl7TmlbDmja4NCiAgICAgIHJvb21BcnI6IFtdLA0KICAgICAgdGFibGVEYXRhOiB7DQogICAgICAgIHN0b3JlX2lkOiAnJywNCiAgICAgICAgcm9vbV9pZDogJycsDQogICAgICAgIG9yZGVyX3N0YXR1czogJycsDQogICAgICAgIG9yZGVyX3NuOiAnJywNCiAgICAgICAgcGF5X3R5cGU6ICcnLA0KICAgICAgICBwYXlfc3RhdHVzOiAnJw0KICAgICAgfSwNCiAgICAgIC8vIOS4i+WNleeUqOaIt+S/oeaBrw0KICAgICAgdXNlckRyYXdlcjogew0KICAgICAgICBzaG93OiBmYWxzZSwNCiAgICAgICAgZGF0YToge30NCiAgICAgIH0sDQogICAgICAvLyDmiL/pl7Tkv6Hmga8NCiAgICAgIHJvb21EcmF3ZXI6IHsNCiAgICAgICAgc2hvdzogZmFsc2UsDQogICAgICAgIGRhdGE6IHsNCiAgICAgICAgICBzdG9yZTogew0KICAgICAgICAgICAgd29ya193ZWVrOiBbXQ0KICAgICAgICAgIH0sDQogICAgICAgICAgb3JkZXJSb29tOiB7DQogICAgICAgICAgICByb29tX2luZm86IHt9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgLy8g6YCA6L+Y5oq86YeR5by556qXDQogICAgICByZXR1cm5EZXBvc2l0RGlhbG9nOiB7DQogICAgICAgIHNob3c6IGZhbHNlLA0KICAgICAgICBmb3JtOiB7DQogICAgICAgICAgb3JkZXJfaWQ6ICcnLA0KICAgICAgICAgIGRlcG9zaXRfZGVkdWN0OiAnJywNCiAgICAgICAgICBkZXBvc2l0OiAnJywNCiAgICAgICAgICBkZXBvc2l0X3JlbWFya3M6ICcnDQogICAgICAgIH0sDQogICAgICAgIGZvcm1SdWxlczogew0KICAgICAgICAgIGRlcG9zaXRfZGVkdWN0OiBbew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6YCA5qy+6YeR6aKdJw0KICAgICAgICAgIH1dDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDlj5bmtojpgIDmrL7lvLnnqpcNCiAgICBoaWRlUmV0dXJuRGVwb3NpdERpYWxvZygpIHsNCiAgICAgIHRoaXMucmV0dXJuRGVwb3NpdERpYWxvZy5zaG93ID0gZmFsc2UNCiAgICAgIHRoaXMuJHJlZnNbJ3JldHVybkRlcG9zaXREaWFsb2dGb3JtJ10ucmVzZXRGaWVsZHMoKQ0KICAgIH0sDQogICAgLy8g6YCA5qy+5o+Q5Lqk5by556qXDQogICAgc3VibWl0UmV0dXJuRGVwb3NpdCgpIHsNCiAgICAgIHRoaXMuJHJlZnNbJ3JldHVybkRlcG9zaXREaWFsb2dGb3JtJ10udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBhd2FpdCByZXR1cm5EZXBvc2l0KHsNCiAgICAgICAgICAgIG9yZGVyX2lkOiB0aGlzLnJldHVybkRlcG9zaXREaWFsb2cuZm9ybS5vcmRlcl9pZCwNCiAgICAgICAgICAgIGRlcG9zaXRfZGVkdWN0OiB0aGlzLnJldHVybkRlcG9zaXREaWFsb2cuZm9ybS5kZXBvc2l0X2RlZHVjdCwNCiAgICAgICAgICAgIGRlcG9zaXRfcmVtYXJrczogdGhpcy5yZXR1cm5EZXBvc2l0RGlhbG9nLmZvcm0uZGVwb3NpdF9yZW1hcmtzDQogICAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+mAgOasvuaIkOWKnycpDQogICAgICAgICAgICB0aGlzLnJldHVybkRlcG9zaXREaWFsb2cuc2hvdyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLmdldFJvb21PcmRlckxpc3QoKQ0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDmn6XnnIvkuIvljZXnlKjmiLcNCiAgICBjaGVja1VzZXIoZGF0YSkgew0KICAgICAgdGhpcy51c2VyRHJhd2VyLnNob3cgPSB0cnVlDQogICAgICB0aGlzLnVzZXJEcmF3ZXIuZGF0YSA9IGRhdGENCiAgICB9LA0KICAgIC8vIOafpeeci+aIv+mXtA0KICAgIGNoZWNrUm9vbShkYXRhKSB7DQogICAgICB0aGlzLnJvb21EcmF3ZXIuc2hvdyA9IHRydWUNCiAgICAgIHRoaXMucm9vbURyYXdlci5kYXRhID0gZGF0YQ0KICAgICAgdGhpcy5yb29tRHJhd2VyLmRhdGEuc3RvcmUud29ya193ZWVrID0gdGhpcy5yb29tRHJhd2VyLmRhdGEuc3RvcmUud29ya193ZWVrLnNvcnQoKQ0KICAgIH0sDQogICAgLy8g5p+l6K+iDQogICAgc3VibWl0U2VhcmNoKCkgew0KICAgICAgdGhpcy5NaXhfdGFibGVEYXRhLmN1cnJlbnRQYWdlID0gMQ0KICAgICAgdGhpcy5nZXRSb29tT3JkZXJMaXN0KCkNCiAgICB9LA0KICAgIC8vIOmHjee9ruaVsOaNrg0KICAgIHJlc2V0RGF0YSgpIHsNCiAgICAgIHRoaXMucm9vbUFyciA9IFtdDQogICAgICB0aGlzLnRhYmxlRGF0YS5zdG9yZV9pZCA9ICcnDQogICAgICB0aGlzLnRhYmxlRGF0YS5yb29tX2lkID0gJycNCiAgICAgIHRoaXMudGFibGVEYXRhLnBheV9zdGF0dXMgPSAnJw0KICAgICAgdGhpcy50YWJsZURhdGEucGF5X3R5cGUgPSAnJw0KICAgICAgdGhpcy50YWJsZURhdGEub3JkZXJfc24gPSAnJw0KICAgICAgdGhpcy50YWJsZURhdGEub3JkZXJfc3RhdHVzID0gJycNCiAgICB9LA0KICAgIC8vIOWPlua2iOiuouWNlQ0KICAgIGNhbmNlbE9yZGVyKG9yZGVyX2lkKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfmgqjnoa7lrpropoHlj5bmtojor6XorqLljZXlkJc/JywgJ+a4qemmqOaPkOekuicsIHsNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgYXdhaXQgY2FuY2VsT3JkZXIoew0KICAgICAgICAgIG9yZGVyX2lkDQogICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5bey5Y+W5raIJykNCiAgICAgICAgICB0aGlzLk1peF90YWJsZURhdGEuY3VycmVudFBhZ2UgPSAxDQogICAgICAgICAgdGhpcy5nZXRSb29tT3JkZXJMaXN0KCkNCiAgICAgICAgfSkNCiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KQ0KICAgIH0sDQogICAgLy8g6YCA6L+Y5oq86YeRDQogICAgcmV0dXJuRGVwb3NpdChpdGVtKSB7DQogICAgICB0aGlzLnJldHVybkRlcG9zaXREaWFsb2cuZm9ybS5vcmRlcl9pZCA9IGl0ZW0ub3JkZXJfaWQNCiAgICAgIHRoaXMucmV0dXJuRGVwb3NpdERpYWxvZy5mb3JtLmRlcG9zaXRfZGVkdWN0ID0gaXRlbS5kZXBvc2l0X2RlZHVjdA0KICAgICAgdGhpcy5yZXR1cm5EZXBvc2l0RGlhbG9nLmZvcm0uZGVwb3NpdCA9IGl0ZW0uZGVwb3NpdA0KICAgICAgdGhpcy5yZXR1cm5EZXBvc2l0RGlhbG9nLnNob3cgPSB0cnVlDQogICAgfSwNCiAgICAvLyDojrflj5bmiL/pl7TorqLljZXliJfooagNCiAgICBhc3luYyBnZXRSb29tT3JkZXJMaXN0KCkgew0KICAgICAgYXdhaXQgZ2V0Um9vbU9yZGVyTGlzdCh7DQogICAgICAgIHBhZ2U6IHRoaXMuTWl4X3RhYmxlRGF0YS5jdXJyZW50UGFnZSwNCiAgICAgICAgbGltaXQ6IHRoaXMuTWl4X3RhYmxlRGF0YS5wYWdlU2l6ZSwNCiAgICAgICAgc3RvcmVfaWQ6IHRoaXMudGFibGVEYXRhLnN0b3JlX2lkLA0KICAgICAgICByb29tX2lkOiB0aGlzLnRhYmxlRGF0YS5yb29tX2lkLA0KICAgICAgICBvcmRlcl9zbjogdGhpcy50YWJsZURhdGEub3JkZXJfc24sDQogICAgICAgIG9yZGVyX3N0YXR1czogdGhpcy50YWJsZURhdGEub3JkZXJfc3RhdHVzLA0KICAgICAgICBwYXlfdHlwZTogdGhpcy50YWJsZURhdGEucGF5X3R5cGUsDQogICAgICAgIHBheV9zdGF0dXM6IHRoaXMudGFibGVEYXRhLnBheV9zdGF0dXMNCiAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMuTWl4X3RhYmxlRGF0YS5saXN0ID0gZGF0YS5saXN0DQogICAgICAgIHRoaXMuTWl4X3RhYmxlRGF0YS50b3RhbCA9IGRhdGEuY291bnQNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDojrflj5bpl6jlupfliJfooagNCiAgICBhc3luYyBnZXRTdG9yZUxpc3QoKSB7DQogICAgICBhd2FpdCBnZXRTdG9yZUxpc3QoKS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLnN0b3JlQXJyID0gZGF0YS5saXN0DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6I635Y+W5oi/6Ze05YiX6KGoDQogICAgYXN5bmMgZ2V0Um9vbUxpc3Qoc3RvcmVfaWQpIHsNCiAgICAgIHRoaXMucm9vbUFyciA9IFtdDQogICAgICB0aGlzLnRhYmxlRGF0YS5yb29tX2lkID0gJycNCiAgICAgIGF3YWl0IGdldFJvb21MaXN0KHsNCiAgICAgICAgc3RvcmVfaWQNCiAgICAgIH0pLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMucm9vbUFyciA9IGRhdGEubGlzdA0KICAgICAgfSkNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRSb29tT3JkZXJMaXN0KCkNCiAgICB0aGlzLmdldFN0b3JlTGlzdCgpDQogIH0NCn0NCg=="},{"version":3,"sources":["room-order-manage-index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"room-order-manage-index.vue","sourceRoot":"src/views/order-manage/room-order-manage","sourcesContent":["<template>\r\n  <div class=\"room-order-manage-index\">\r\n    <el-select v-model=\"tableData.store_id\" placeholder=\"请选择门店\" filterable clearable @change=\"getRoomList\">\r\n      <el-option v-for=\"item in storeArr\" :key=\"item.store_id\" :value=\"item.store_id\" :label=\"item.store_name\"></el-option>\r\n    </el-select>\r\n    <el-select v-model=\"tableData.room_id\" placeholder=\"请选择房间\" filterable clearable>\r\n      <el-option v-for=\"item in roomArr\" :key=\"item.room_id\" :value=\"item.room_id\" :label=\"item.room_name\"></el-option>\r\n    </el-select>\r\n    <el-input v-model=\"tableData.order_sn\" style=\"width:300px\" maxlength=\"50\" placeholder=\"订单号查询\" clearable></el-input>\r\n    <el-select v-model=\"tableData.order_status\" placeholder=\"订单状态\" filterable clearable>\r\n      <el-option value=\"1\" label=\"待开始\"></el-option>\r\n      <el-option value=\"2\" label=\"进行中\"></el-option>\r\n      <el-option value=\"3\" label=\"已完成\"></el-option>\r\n      <el-option value=\"4\" label=\"已取消\"></el-option>\r\n    </el-select>\r\n    <el-select v-model=\"tableData.pay_type\" placeholder=\"支付方式\" filterable clearable>\r\n      <el-option value=\"balance\" label=\"钱包余额\"></el-option>\r\n      <el-option value=\"wechat\" label=\"微信\"></el-option>\r\n    </el-select>\r\n    <el-select v-model=\"tableData.pay_status\" placeholder=\"支付状态\" filterable clearable>\r\n      <el-option value=\"0\" label=\"未支付\"></el-option>\r\n      <el-option value=\"1\" label=\"已支付\"></el-option>\r\n    </el-select>\r\n    <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"submitSearch\">查询</el-button>\r\n    <el-button type=\"primary\" icon=\"el-icon-refresh-right\" @click=\"resetData\">重置</el-button>\r\n    <el-table class=\"mt15\" border height=\"calc(100vh - 225px)\" :data=\"Mix_tableData.list\">\r\n      <el-table-column label=\"订单ID\" prop=\"order_id\"></el-table-column>\r\n      <el-table-column label=\"开始时间\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          {{ $dateFormatter(scope.row.orderRoom.start_time + '000', 'yy-mm-dd hh:mm:ss') }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"结束时间\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          {{ $dateFormatter(scope.row.orderRoom.end_time + '000', 'yy-mm-dd hh:mm:ss') }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"时长\">\r\n        <template slot-scope=\"scope\">\r\n          <!-- 按小时 -->\r\n          <div v-if=\"scope.row.orderRoom.room_info.room_type === 1\">{{ $diffTime(+(scope.row.orderRoom.start_time + '000'), +(scope.row.orderRoom.end_time + '000')).fmt }}</div>\r\n          <!-- 按天数 -->\r\n          <div v-if=\"scope.row.orderRoom.room_info.room_type === 2\">{{ $diffDate(+(scope.row.orderRoom.start_time + '000'), +(scope.row.orderRoom.end_time + '000')) }}天</div>\r\n          <!-- 按月 -->\r\n          <div v-if=\"scope.row.orderRoom.room_info.room_type === 4\">{{ $diffDate(+(scope.row.orderRoom.start_time + '000'), +(scope.row.orderRoom.end_time + '000')) }}天</div>\r\n          <!-- 按分钟 -->\r\n          <div v-if=\"scope.row.orderRoom.room_info.room_type === 5\">{{ $diffTime(+(scope.row.orderRoom.start_time + '000'), +(scope.row.orderRoom.end_time + '000')).fmt }}</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"总收益(元)\" prop=\"order_profit\"></el-table-column>\r\n      <el-table-column label=\"订单状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag type=\"info\" v-if=\"scope.row.order_status === 1\">待开始</el-tag>\r\n          <el-tag type=\"primary\" v-if=\"scope.row.order_status === 2\">进行中</el-tag>\r\n          <el-tag type=\"success\" v-if=\"scope.row.order_status === 3\">已完成</el-tag>\r\n          <el-tag type=\"danger\" v-if=\"scope.row.order_status === 4\">已取消</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"支付方式\">\r\n        <template slot-scope=\"scope\">\r\n          <div class=\"pay-type\" v-if=\"scope.row.pay_type === 'balance'\"><span class=\"kj kj-qb\"></span>钱包余额</div>\r\n          <div class=\"pay-type\" v-if=\"scope.row.pay_type === 'wechat'\"><span class=\"kj kj-wechat\"></span>微信</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"支付状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag type=\"info\" v-if=\"scope.row.pay_status === '0'\">未支付</el-tag>\r\n          <el-tag type=\"success\" v-if=\"scope.row.pay_status === '1'\">已支付</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"下单用户\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-view\" @click=\"checkUser(scope.row.member)\">查看</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"房间信息\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" type=\"text\" icon=\"el-icon-view\" @click=\"checkRoom(scope.row)\">查看</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" type=\"action\" width=\"250\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"warning\" size=\"mini\" @click=\"cancelOrder(scope.row.order_id)\" v-if=\"scope.row.order_status === 1\">取消订单</el-button>\r\n          <el-button type=\"danger\" size=\"mini\" v-if=\"scope.row.order_status === 3 && scope.row.deposit_status !== 3\" @click=\"returnDeposit(scope.row)\">退还押金</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <Pagination :tableData=\"Mix_tableData\" @pageChange=\"$pageChange\" :getList=\"getRoomOrderList\"></Pagination>\r\n    <el-drawer\r\n      title=\"下单用户信息\"\r\n      :visible.sync=\"userDrawer.show\"\r\n      direction=\"ltr\">\r\n      <el-form label-position=\"left\" label-width=\"80px\">\r\n        <el-form-item label=\"微信昵称\">{{ userDrawer.data.nick_name }}</el-form-item>\r\n        <el-form-item label=\"微信头像\">\r\n          <el-image :src=\"userDrawer.data.avatar_url\" style=\"width:100px;height:100px\" fit=\"cover\"></el-image>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\">\r\n          <el-tag type=\"primary\" v-if=\"userDrawer.data.gender === 1\">男</el-tag>\r\n          <el-tag type=\"danger\" v-if=\"userDrawer.data.gender === 2\">女</el-tag>\r\n        </el-form-item>\r\n        <el-form-item label=\"联系方式\">{{ userDrawer.data.mobile }}</el-form-item>\r\n        <el-form-item label=\"openid\">{{ userDrawer.data.openid }}</el-form-item>\r\n        <el-form-item label=\"地区\">{{ userDrawer.data.province }}</el-form-item>\r\n      </el-form>\r\n    </el-drawer>\r\n    <el-drawer\r\n      title=\"房间信息\"\r\n      :visible.sync=\"roomDrawer.show\"\r\n      direction=\"ltr\">\r\n      <el-form label-position=\"left\" label-width=\"100px\">\r\n        <el-form-item label=\"门店名称\">{{ roomDrawer.data.store.store_name }}</el-form-item>\r\n        <el-form-item label=\"营业时间\">\r\n          <div>\r\n            <el-tag v-for=\"(item, index) in roomDrawer.data.store.work_week\" :key=\"item\">{{ item | numTransZh_Week }}</el-tag>\r\n          </div>\r\n          <div>{{ roomDrawer.data.store.work_time_start }} ~ {{ roomDrawer.data.store.work_time_end }}</div>\r\n        </el-form-item>\r\n        <el-form-item label=\"门店地址\">{{ roomDrawer.data.store.address }}</el-form-item>\r\n        <el-form-item label=\"门店主图\">\r\n          <el-image :src=\"baseUrl + roomDrawer.data.store.store_image\" style=\"width:100px;height:100px\" fit=\"cover\"></el-image>\r\n        </el-form-item>\r\n        <el-form-item label=\"房间名称\">{{ roomDrawer.data.orderRoom.room_info.room_name }}</el-form-item>\r\n        <el-form-item label=\"可容纳人数\">{{ roomDrawer.data.orderRoom.room_info.room_people }}人</el-form-item>\r\n        <el-form-item label=\"押金\">{{ roomDrawer.data.orderRoom.room_info.room_deposit }}元</el-form-item>\r\n        <el-form-item label=\"价格\">{{ roomDrawer.data.orderRoom.room_info.room_price }}元/{{ roomDrawer.data.orderRoom.room_info.room_type === 1 ? '小时' : roomDrawer.data.orderRoom.room_info.room_type === 2 ? '天' : roomDrawer.data.orderRoom.room_info.room_type === 3 ? '次' : roomDrawer.data.orderRoom.room_info.room_type === 4 ? '月' : roomDrawer.data.orderRoom.room_info.room_type === 5 ? '分钟' : '' }}</el-form-item>\r\n        <el-form-item label=\"房间面积\">{{ roomDrawer.data.orderRoom.room_info.room_size }}平方米</el-form-item>\r\n        <el-form-item label=\"房间标签\">\r\n          <el-tag>{{ roomDrawer.data.orderRoom.room_info.room_label }}</el-tag>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-drawer>\r\n    <el-dialog\r\n      title=\"退款押金\"\r\n      :visible.sync=\"returnDepositDialog.show\"\r\n      width=\"30%\">\r\n      <el-form label-width=\"80px\" ref=\"returnDepositDialogForm\" :model=\"returnDepositDialog.form\" :rules=\"returnDepositDialog.formRules\">\r\n        <el-form-item label=\"扣除金额\">\r\n          <el-input-number :step=\"0.01\" v-model=\"returnDepositDialog.form.deposit_deduct\" :min=\"0\" :precision=\"2\" :max=\"returnDepositDialog.form.deposit\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\">\r\n          <el-input type=\"textarea\" v-model=\"returnDepositDialog.form.deposit_remarks\" rows=\"5\" maxlength=\"200\" show-word-limit></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"hideReturnDepositDialog\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitReturnDeposit\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getRoomOrderList} from \"@/api/order-manage/room-order-manage\"\r\nimport {getStoreList} from \"@/api/store-manage/store-manage\"\r\nimport {getRoomList} from \"@/api/store-manage/room-manage\"\r\nimport {returnDeposit} from \"@/api/order-manage/room-order-manage\"\r\nimport {cancelOrder} from \"@/api/order-manage/room-order-manage\"\r\n\r\nexport default {\r\n  name: \"room-order-manage-index\",\r\n  data() {\r\n    return {\r\n      // 门店数据\r\n      storeArr: [],\r\n      // 房间数据\r\n      roomArr: [],\r\n      tableData: {\r\n        store_id: '',\r\n        room_id: '',\r\n        order_status: '',\r\n        order_sn: '',\r\n        pay_type: '',\r\n        pay_status: ''\r\n      },\r\n      // 下单用户信息\r\n      userDrawer: {\r\n        show: false,\r\n        data: {}\r\n      },\r\n      // 房间信息\r\n      roomDrawer: {\r\n        show: false,\r\n        data: {\r\n          store: {\r\n            work_week: []\r\n          },\r\n          orderRoom: {\r\n            room_info: {}\r\n          }\r\n        }\r\n      },\r\n      // 退还押金弹窗\r\n      returnDepositDialog: {\r\n        show: false,\r\n        form: {\r\n          order_id: '',\r\n          deposit_deduct: '',\r\n          deposit: '',\r\n          deposit_remarks: ''\r\n        },\r\n        formRules: {\r\n          deposit_deduct: [{\r\n            required: true,\r\n            message: '请输入退款金额'\r\n          }]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 取消退款弹窗\r\n    hideReturnDepositDialog() {\r\n      this.returnDepositDialog.show = false\r\n      this.$refs['returnDepositDialogForm'].resetFields()\r\n    },\r\n    // 退款提交弹窗\r\n    submitReturnDeposit() {\r\n      this.$refs['returnDepositDialogForm'].validate(async valid => {\r\n        if (valid) {\r\n          await returnDeposit({\r\n            order_id: this.returnDepositDialog.form.order_id,\r\n            deposit_deduct: this.returnDepositDialog.form.deposit_deduct,\r\n            deposit_remarks: this.returnDepositDialog.form.deposit_remarks\r\n          }).then(() => {\r\n            this.$message.success('退款成功')\r\n            this.returnDepositDialog.show = false\r\n            this.getRoomOrderList()\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 查看下单用户\r\n    checkUser(data) {\r\n      this.userDrawer.show = true\r\n      this.userDrawer.data = data\r\n    },\r\n    // 查看房间\r\n    checkRoom(data) {\r\n      this.roomDrawer.show = true\r\n      this.roomDrawer.data = data\r\n      this.roomDrawer.data.store.work_week = this.roomDrawer.data.store.work_week.sort()\r\n    },\r\n    // 查询\r\n    submitSearch() {\r\n      this.Mix_tableData.currentPage = 1\r\n      this.getRoomOrderList()\r\n    },\r\n    // 重置数据\r\n    resetData() {\r\n      this.roomArr = []\r\n      this.tableData.store_id = ''\r\n      this.tableData.room_id = ''\r\n      this.tableData.pay_status = ''\r\n      this.tableData.pay_type = ''\r\n      this.tableData.order_sn = ''\r\n      this.tableData.order_status = ''\r\n    },\r\n    // 取消订单\r\n    cancelOrder(order_id) {\r\n      this.$confirm('您确定要取消该订单吗?', '温馨提示', {\r\n        type: 'warning'\r\n      }).then(async () => {\r\n        await cancelOrder({\r\n          order_id\r\n        }).then(() => {\r\n          this.$message.success('已取消')\r\n          this.Mix_tableData.currentPage = 1\r\n          this.getRoomOrderList()\r\n        })\r\n      }).catch(() => {})\r\n    },\r\n    // 退还押金\r\n    returnDeposit(item) {\r\n      this.returnDepositDialog.form.order_id = item.order_id\r\n      this.returnDepositDialog.form.deposit_deduct = item.deposit_deduct\r\n      this.returnDepositDialog.form.deposit = item.deposit\r\n      this.returnDepositDialog.show = true\r\n    },\r\n    // 获取房间订单列表\r\n    async getRoomOrderList() {\r\n      await getRoomOrderList({\r\n        page: this.Mix_tableData.currentPage,\r\n        limit: this.Mix_tableData.pageSize,\r\n        store_id: this.tableData.store_id,\r\n        room_id: this.tableData.room_id,\r\n        order_sn: this.tableData.order_sn,\r\n        order_status: this.tableData.order_status,\r\n        pay_type: this.tableData.pay_type,\r\n        pay_status: this.tableData.pay_status\r\n      }).then(data => {\r\n        this.Mix_tableData.list = data.list\r\n        this.Mix_tableData.total = data.count\r\n      })\r\n    },\r\n    // 获取门店列表\r\n    async getStoreList() {\r\n      await getStoreList().then(data => {\r\n        this.storeArr = data.list\r\n      })\r\n    },\r\n    // 获取房间列表\r\n    async getRoomList(store_id) {\r\n      this.roomArr = []\r\n      this.tableData.room_id = ''\r\n      await getRoomList({\r\n        store_id\r\n      }).then(data => {\r\n        this.roomArr = data.list\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getRoomOrderList()\r\n    this.getStoreList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.pay-type {\r\n  .kj {\r\n    font-size: 30px;\r\n    vertical-align: -5px;\r\n    margin-right: 5px;\r\n  }\r\n  .kj-qb {\r\n    color: #e6a23c;\r\n  }\r\n  .kj-wechat {\r\n    color: #67c23a;\r\n  }\r\n}\r\n\r\n::v-deep .el-drawer__body {\r\n  padding: 20px;\r\n}\r\n\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n</style>\r\n"]}]}