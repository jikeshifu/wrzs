{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\components\\Tinymce\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\components\\Tinymce\\index.vue","mtime":1686935646956},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js","mtime":1686936410308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovKioNCiAqIGRvY3M6DQogKiBodHRwczovL3BhbmppYWNoZW4uZ2l0aHViLmlvL3Z1ZS1lbGVtZW50LWFkbWluLXNpdGUvZmVhdHVyZS9jb21wb25lbnQvcmljaC1lZGl0b3IuaHRtbCN0aW55bWNlDQogKi8NCmltcG9ydCBlZGl0b3JJbWFnZSBmcm9tICcuL2NvbXBvbmVudHMvRWRpdG9ySW1hZ2UnDQppbXBvcnQgcGx1Z2lucyBmcm9tICcuL3BsdWdpbnMnDQppbXBvcnQgdG9vbGJhciBmcm9tICcuL3Rvb2xiYXInDQppbXBvcnQgbG9hZCBmcm9tICcuL2R5bmFtaWNMb2FkU2NyaXB0Jw0KDQovLyB3aHkgdXNlIHRoaXMgY2RuLCBkZXRhaWwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9QYW5KaWFDaGVuL3RpbnltY2UtYWxsLWluLW9uZQ0KY29uc3QgdGlueW1jZUNETiA9ICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3RpbnltY2UtYWxsLWluLW9uZUA0LjkuMy90aW55bWNlLm1pbi5qcycNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnVGlueW1jZScsDQogIGNvbXBvbmVudHM6IHsgZWRpdG9ySW1hZ2UgfSwNCiAgcHJvcHM6IHsNCiAgICBpZDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogZnVuY3Rpb24oKSB7DQogICAgICAgIHJldHVybiAndnVlLXRpbnltY2UtJyArICtuZXcgRGF0ZSgpICsgKChNYXRoLnJhbmRvbSgpICogMTAwMCkudG9GaXhlZCgwKSArICcnKQ0KICAgICAgfQ0KICAgIH0sDQogICAgdmFsdWU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICcnDQogICAgfSwNCiAgICB0b29sYmFyOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgbWVudWJhcjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ2ZpbGUgZWRpdCBpbnNlcnQgdmlldyBmb3JtYXQgdGFibGUnDQogICAgfSwNCiAgICBoZWlnaHQ6IHsNCiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiAzNjANCiAgICB9LA0KICAgIHdpZHRoOiB7DQogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLA0KICAgICAgcmVxdWlyZWQ6IGZhbHNlLA0KICAgICAgZGVmYXVsdDogJ2F1dG8nDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBoYXNDaGFuZ2U6IGZhbHNlLA0KICAgICAgaGFzSW5pdDogZmFsc2UsDQogICAgICB0aW55bWNlSWQ6IHRoaXMuaWQsDQogICAgICBmdWxsc2NyZWVuOiBmYWxzZSwNCiAgICAgIGxhbmd1YWdlVHlwZUxpc3Q6IHsNCiAgICAgICAgJ2VuJzogJ2VuJywNCiAgICAgICAgJ3poJzogJ3poX0NOJywNCiAgICAgICAgJ2VzJzogJ2VzX01YJywNCiAgICAgICAgJ2phJzogJ2phJw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBjb250YWluZXJXaWR0aCgpIHsNCiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy53aWR0aA0KICAgICAgaWYgKC9eW1xkXSsoXC5bXGRdKyk/JC8udGVzdCh3aWR0aCkpIHsgLy8gbWF0Y2hlcyBgMTAwYCwgYCcxMDAnYA0KICAgICAgICByZXR1cm4gYCR7d2lkdGh9cHhgDQogICAgICB9DQogICAgICByZXR1cm4gd2lkdGgNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgdmFsdWUodmFsKSB7DQogICAgICBpZiAoIXRoaXMuaGFzQ2hhbmdlICYmIHRoaXMuaGFzSW5pdCkgew0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9Pg0KICAgICAgICAgIHdpbmRvdy50aW55bWNlLmdldCh0aGlzLnRpbnltY2VJZCkuc2V0Q29udGVudCh2YWwgfHwgJycpKQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmluaXQoKQ0KICB9LA0KICBhY3RpdmF0ZWQoKSB7DQogICAgaWYgKHdpbmRvdy50aW55bWNlKSB7DQogICAgICB0aGlzLmluaXRUaW55bWNlKCkNCiAgICB9DQogIH0sDQogIGRlYWN0aXZhdGVkKCkgew0KICAgIHRoaXMuZGVzdHJveVRpbnltY2UoKQ0KICB9LA0KICBkZXN0cm95ZWQoKSB7DQogICAgdGhpcy5kZXN0cm95VGlueW1jZSgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0KCkgew0KICAgICAgLy8gZHluYW1pYyBsb2FkIHRpbnltY2UgZnJvbSBjZG4NCiAgICAgIGxvYWQodGlueW1jZUNETiwgKGVycikgPT4gew0KICAgICAgICBpZiAoZXJyKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIubWVzc2FnZSkNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmluaXRUaW55bWNlKCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBpbml0VGlueW1jZSgpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpcw0KICAgICAgd2luZG93LnRpbnltY2UuaW5pdCh7DQogICAgICAgIHNlbGVjdG9yOiBgIyR7dGhpcy50aW55bWNlSWR9YCwNCiAgICAgICAgbGFuZ3VhZ2U6IHRoaXMubGFuZ3VhZ2VUeXBlTGlzdFsnemgnXSwNCiAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCwNCiAgICAgICAgYm9keV9jbGFzczogJ3BhbmVsLWJvZHkgJywNCiAgICAgICAgb2JqZWN0X3Jlc2l6aW5nOiBmYWxzZSwNCiAgICAgICAgdG9vbGJhcjogdGhpcy50b29sYmFyLmxlbmd0aCA+IDAgPyB0aGlzLnRvb2xiYXIgOiB0b29sYmFyLA0KICAgICAgICBtZW51YmFyOiB0aGlzLm1lbnViYXIsDQogICAgICAgIHBsdWdpbnM6IHBsdWdpbnMsDQogICAgICAgIGVuZF9jb250YWluZXJfb25fZW1wdHlfYmxvY2s6IHRydWUsDQogICAgICAgIHBvd2VycGFzdGVfd29yZF9pbXBvcnQ6ICdjbGVhbicsDQogICAgICAgIGNvZGVfZGlhbG9nX2hlaWdodDogNDUwLA0KICAgICAgICBjb2RlX2RpYWxvZ193aWR0aDogMTAwMCwNCiAgICAgICAgYWR2bGlzdF9idWxsZXRfc3R5bGVzOiAnc3F1YXJlJywNCiAgICAgICAgYWR2bGlzdF9udW1iZXJfc3R5bGVzOiAnZGVmYXVsdCcsDQogICAgICAgIGltYWdldG9vbHNfY29yc19ob3N0czogWyd3d3cudGlueW1jZS5jb20nLCAnY29kZXBlbi5pbyddLA0KICAgICAgICBkZWZhdWx0X2xpbmtfdGFyZ2V0OiAnX2JsYW5rJywNCiAgICAgICAgbGlua190aXRsZTogZmFsc2UsDQogICAgICAgIG5vbmJyZWFraW5nX2ZvcmNlX3RhYjogdHJ1ZSwgLy8gaW5zZXJ0aW5nIG5vbmJyZWFraW5nIHNwYWNlICZuYnNwOyBuZWVkIE5vbmJyZWFraW5nIFNwYWNlIFBsdWdpbg0KICAgICAgICBpbml0X2luc3RhbmNlX2NhbGxiYWNrOiBlZGl0b3IgPT4gew0KICAgICAgICAgIGlmIChfdGhpcy52YWx1ZSkgew0KICAgICAgICAgICAgZWRpdG9yLnNldENvbnRlbnQoX3RoaXMudmFsdWUpDQogICAgICAgICAgfQ0KICAgICAgICAgIF90aGlzLmhhc0luaXQgPSB0cnVlDQogICAgICAgICAgZWRpdG9yLm9uKCdOb2RlQ2hhbmdlIENoYW5nZSBLZXlVcCBTZXRDb250ZW50JywgKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5oYXNDaGFuZ2UgPSB0cnVlDQogICAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGVkaXRvci5nZXRDb250ZW50KCkpDQogICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgc2V0dXAoZWRpdG9yKSB7DQogICAgICAgICAgZWRpdG9yLm9uKCdGdWxsc2NyZWVuU3RhdGVDaGFuZ2VkJywgKGUpID0+IHsNCiAgICAgICAgICAgIF90aGlzLmZ1bGxzY3JlZW4gPSBlLnN0YXRlDQogICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgLy8gaXQgd2lsbCB0cnkgdG8ga2VlcCB0aGVzZSBVUkxzIGludGFjdA0KICAgICAgICAvLyBodHRwczovL3d3dy50aW55LmNsb3VkL2RvY3MtM3gvcmVmZXJlbmNlL2NvbmZpZ3VyYXRpb24vQ29uZmlndXJhdGlvbjN4QGNvbnZlcnRfdXJscy8NCiAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTE5NjIwNS9kaXNhYmxlLXRpbnltY2UtYWJzb2x1dGUtdG8tcmVsYXRpdmUtdXJsLWNvbnZlcnNpb25zDQogICAgICAgIGNvbnZlcnRfdXJsczogZmFsc2UNCiAgICAgICAgLy8g5pW05ZCI5LiD54mb5LiK5LygDQogICAgICAgIC8vIGltYWdlc19kYXRhaW1nX2ZpbHRlcihpbWcpIHsNCiAgICAgICAgLy8gICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgLy8gICAgIGNvbnN0ICRpbWFnZSA9ICQoaW1nKTsNCiAgICAgICAgLy8gICAgICRpbWFnZS5yZW1vdmVBdHRyKCd3aWR0aCcpOw0KICAgICAgICAvLyAgICAgJGltYWdlLnJlbW92ZUF0dHIoJ2hlaWdodCcpOw0KICAgICAgICAvLyAgICAgaWYgKCRpbWFnZVswXS5oZWlnaHQgJiYgJGltYWdlWzBdLndpZHRoKSB7DQogICAgICAgIC8vICAgICAgICRpbWFnZS5hdHRyKCdkYXRhLXdzY250eXBlJywgJ2ltYWdlJyk7DQogICAgICAgIC8vICAgICAgICRpbWFnZS5hdHRyKCdkYXRhLXdzY25oJywgJGltYWdlWzBdLmhlaWdodCk7DQogICAgICAgIC8vICAgICAgICRpbWFnZS5hdHRyKCdkYXRhLXdzY253JywgJGltYWdlWzBdLndpZHRoKTsNCiAgICAgICAgLy8gICAgICAgJGltYWdlLmFkZENsYXNzKCd3c2NucGgnKTsNCiAgICAgICAgLy8gICAgIH0NCiAgICAgICAgLy8gICB9LCAwKTsNCiAgICAgICAgLy8gICByZXR1cm4gaW1nDQogICAgICAgIC8vIH0sDQogICAgICAgIC8vIGltYWdlc191cGxvYWRfaGFuZGxlcihibG9iSW5mbywgc3VjY2VzcywgZmFpbHVyZSwgcHJvZ3Jlc3MpIHsNCiAgICAgICAgLy8gICBwcm9ncmVzcygwKTsNCiAgICAgICAgLy8gICBjb25zdCB0b2tlbiA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzLnRva2VuOw0KICAgICAgICAvLyAgIGdldFRva2VuKHRva2VuKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgLy8gICAgIGNvbnN0IHVybCA9IHJlc3BvbnNlLmRhdGEucWluaXVfdXJsOw0KICAgICAgICAvLyAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgLy8gICAgIGZvcm1EYXRhLmFwcGVuZCgndG9rZW4nLCByZXNwb25zZS5kYXRhLnFpbml1X3Rva2VuKTsNCiAgICAgICAgLy8gICAgIGZvcm1EYXRhLmFwcGVuZCgna2V5JywgcmVzcG9uc2UuZGF0YS5xaW5pdV9rZXkpOw0KICAgICAgICAvLyAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgYmxvYkluZm8uYmxvYigpLCB1cmwpOw0KICAgICAgICAvLyAgICAgdXBsb2FkKGZvcm1EYXRhKS50aGVuKCgpID0+IHsNCiAgICAgICAgLy8gICAgICAgc3VjY2Vzcyh1cmwpOw0KICAgICAgICAvLyAgICAgICBwcm9ncmVzcygxMDApOw0KICAgICAgICAvLyAgICAgfSkNCiAgICAgICAgLy8gICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICAvLyAgICAgZmFpbHVyZSgn5Ye6546w5pyq55+l6Zeu6aKY77yM5Yi35paw6aG16Z2i77yM5oiW6ICF6IGU57O756iL5bqP5ZGYJykNCiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgIC8vICAgfSk7DQogICAgICAgIC8vIH0sDQogICAgICB9KQ0KICAgIH0sDQogICAgZGVzdHJveVRpbnltY2UoKSB7DQogICAgICBjb25zdCB0aW55bWNlID0gd2luZG93LnRpbnltY2UuZ2V0KHRoaXMudGlueW1jZUlkKQ0KICAgICAgaWYgKHRoaXMuZnVsbHNjcmVlbikgew0KICAgICAgICB0aW55bWNlLmV4ZWNDb21tYW5kKCdtY2VGdWxsU2NyZWVuJykNCiAgICAgIH0NCg0KICAgICAgaWYgKHRpbnltY2UpIHsNCiAgICAgICAgdGlueW1jZS5kZXN0cm95KCkNCiAgICAgIH0NCiAgICB9LA0KICAgIHNldENvbnRlbnQodmFsdWUpIHsNCiAgICAgIHdpbmRvdy50aW55bWNlLmdldCh0aGlzLnRpbnltY2VJZCkuc2V0Q29udGVudCh2YWx1ZSkNCiAgICB9LA0KICAgIGdldENvbnRlbnQoKSB7DQogICAgICB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpLmdldENvbnRlbnQoKQ0KICAgIH0sDQogICAgaW1hZ2VTdWNjZXNzQ0JLKGFycikgew0KICAgICAgYXJyLmZvckVhY2godiA9PiB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpLmluc2VydENvbnRlbnQoYDxpbWcgY2xhc3M9IndzY25waCIgc3JjPSIke3YudXJsfSIgPmApKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Tinymce","sourcesContent":["<template>\r\n  <div :class=\"{fullscreen:fullscreen}\" class=\"tinymce-container\" :style=\"{width:containerWidth}\">\r\n    <textarea :id=\"tinymceId\" class=\"tinymce-textarea\" />\r\n    <div class=\"editor-custom-btn-container\">\r\n      <editorImage color=\"#1890ff\" class=\"editor-upload-btn\" @successCBK=\"imageSuccessCBK\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * docs:\r\n * https://panjiachen.github.io/vue-element-admin-site/feature/component/rich-editor.html#tinymce\r\n */\r\nimport editorImage from './components/EditorImage'\r\nimport plugins from './plugins'\r\nimport toolbar from './toolbar'\r\nimport load from './dynamicLoadScript'\r\n\r\n// why use this cdn, detail see https://github.com/PanJiaChen/tinymce-all-in-one\r\nconst tinymceCDN = 'https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js'\r\n\r\nexport default {\r\n  name: 'Tinymce',\r\n  components: { editorImage },\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: function() {\r\n        return 'vue-tinymce-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '')\r\n      }\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    toolbar: {\r\n      type: Array,\r\n      required: false,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    menubar: {\r\n      type: String,\r\n      default: 'file edit insert view format table'\r\n    },\r\n    height: {\r\n      type: [Number, String],\r\n      required: false,\r\n      default: 360\r\n    },\r\n    width: {\r\n      type: [Number, String],\r\n      required: false,\r\n      default: 'auto'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      hasChange: false,\r\n      hasInit: false,\r\n      tinymceId: this.id,\r\n      fullscreen: false,\r\n      languageTypeList: {\r\n        'en': 'en',\r\n        'zh': 'zh_CN',\r\n        'es': 'es_MX',\r\n        'ja': 'ja'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    containerWidth() {\r\n      const width = this.width\r\n      if (/^[\\d]+(\\.[\\d]+)?$/.test(width)) { // matches `100`, `'100'`\r\n        return `${width}px`\r\n      }\r\n      return width\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      if (!this.hasChange && this.hasInit) {\r\n        this.$nextTick(() =>\r\n          window.tinymce.get(this.tinymceId).setContent(val || ''))\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  activated() {\r\n    if (window.tinymce) {\r\n      this.initTinymce()\r\n    }\r\n  },\r\n  deactivated() {\r\n    this.destroyTinymce()\r\n  },\r\n  destroyed() {\r\n    this.destroyTinymce()\r\n  },\r\n  methods: {\r\n    init() {\r\n      // dynamic load tinymce from cdn\r\n      load(tinymceCDN, (err) => {\r\n        if (err) {\r\n          this.$message.error(err.message)\r\n          return\r\n        }\r\n        this.initTinymce()\r\n      })\r\n    },\r\n    initTinymce() {\r\n      const _this = this\r\n      window.tinymce.init({\r\n        selector: `#${this.tinymceId}`,\r\n        language: this.languageTypeList['zh'],\r\n        height: this.height,\r\n        body_class: 'panel-body ',\r\n        object_resizing: false,\r\n        toolbar: this.toolbar.length > 0 ? this.toolbar : toolbar,\r\n        menubar: this.menubar,\r\n        plugins: plugins,\r\n        end_container_on_empty_block: true,\r\n        powerpaste_word_import: 'clean',\r\n        code_dialog_height: 450,\r\n        code_dialog_width: 1000,\r\n        advlist_bullet_styles: 'square',\r\n        advlist_number_styles: 'default',\r\n        imagetools_cors_hosts: ['www.tinymce.com', 'codepen.io'],\r\n        default_link_target: '_blank',\r\n        link_title: false,\r\n        nonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\r\n        init_instance_callback: editor => {\r\n          if (_this.value) {\r\n            editor.setContent(_this.value)\r\n          }\r\n          _this.hasInit = true\r\n          editor.on('NodeChange Change KeyUp SetContent', () => {\r\n            this.hasChange = true\r\n            this.$emit('input', editor.getContent())\r\n          })\r\n        },\r\n        setup(editor) {\r\n          editor.on('FullscreenStateChanged', (e) => {\r\n            _this.fullscreen = e.state\r\n          })\r\n        },\r\n        // it will try to keep these URLs intact\r\n        // https://www.tiny.cloud/docs-3x/reference/configuration/Configuration3x@convert_urls/\r\n        // https://stackoverflow.com/questions/5196205/disable-tinymce-absolute-to-relative-url-conversions\r\n        convert_urls: false\r\n        // 整合七牛上传\r\n        // images_dataimg_filter(img) {\r\n        //   setTimeout(() => {\r\n        //     const $image = $(img);\r\n        //     $image.removeAttr('width');\r\n        //     $image.removeAttr('height');\r\n        //     if ($image[0].height && $image[0].width) {\r\n        //       $image.attr('data-wscntype', 'image');\r\n        //       $image.attr('data-wscnh', $image[0].height);\r\n        //       $image.attr('data-wscnw', $image[0].width);\r\n        //       $image.addClass('wscnph');\r\n        //     }\r\n        //   }, 0);\r\n        //   return img\r\n        // },\r\n        // images_upload_handler(blobInfo, success, failure, progress) {\r\n        //   progress(0);\r\n        //   const token = _this.$store.getters.token;\r\n        //   getToken(token).then(response => {\r\n        //     const url = response.data.qiniu_url;\r\n        //     const formData = new FormData();\r\n        //     formData.append('token', response.data.qiniu_token);\r\n        //     formData.append('key', response.data.qiniu_key);\r\n        //     formData.append('file', blobInfo.blob(), url);\r\n        //     upload(formData).then(() => {\r\n        //       success(url);\r\n        //       progress(100);\r\n        //     })\r\n        //   }).catch(err => {\r\n        //     failure('出现未知问题，刷新页面，或者联系程序员')\r\n        //     console.log(err);\r\n        //   });\r\n        // },\r\n      })\r\n    },\r\n    destroyTinymce() {\r\n      const tinymce = window.tinymce.get(this.tinymceId)\r\n      if (this.fullscreen) {\r\n        tinymce.execCommand('mceFullScreen')\r\n      }\r\n\r\n      if (tinymce) {\r\n        tinymce.destroy()\r\n      }\r\n    },\r\n    setContent(value) {\r\n      window.tinymce.get(this.tinymceId).setContent(value)\r\n    },\r\n    getContent() {\r\n      window.tinymce.get(this.tinymceId).getContent()\r\n    },\r\n    imageSuccessCBK(arr) {\r\n      arr.forEach(v => window.tinymce.get(this.tinymceId).insertContent(`<img class=\"wscnph\" src=\"${v.url}\" >`))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tinymce-container {\r\n  position: relative;\r\n  line-height: normal;\r\n}\r\n\r\n.tinymce-container {\r\n  ::v-deep {\r\n    .mce-fullscreen {\r\n      z-index: 10000;\r\n    }\r\n  }\r\n}\r\n\r\n.tinymce-textarea {\r\n  visibility: hidden;\r\n  z-index: -1;\r\n}\r\n\r\n.editor-custom-btn-container {\r\n  position: absolute;\r\n  right: 4px;\r\n  top: 4px;\r\n  /*z-index: 2005;*/\r\n}\r\n\r\n.fullscreen .editor-custom-btn-container {\r\n  z-index: 10000;\r\n  position: fixed;\r\n}\r\n\r\n.editor-upload-btn {\r\n  display: inline-block;\r\n}\r\n</style>\r\n"]}]}