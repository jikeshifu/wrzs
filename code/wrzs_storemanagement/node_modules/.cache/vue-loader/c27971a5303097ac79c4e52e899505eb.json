{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\sell-drawer-manage\\sell-drawer-manage-edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\sell-drawer-manage\\sell-drawer-manage-edit.vue","mtime":1686935646980},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js","mtime":1686936410308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFN0b3JlTGlzdH0gZnJvbSAiQC9hcGkvc3RvcmUtbWFuYWdlL3N0b3JlLW1hbmFnZSINCmltcG9ydCB7Z2V0Um9vbUxpc3R9IGZyb20gIkAvYXBpL3N0b3JlLW1hbmFnZS9yb29tLW1hbmFnZSINCmltcG9ydCB7ZWRpdFNlbGxEcmF3ZXJ9IGZyb20gIkAvYXBpL3NlbGwtZHJhd2VyLW1hbmFnZS9zZWxsLWRyYXdlci1tYW5hZ2UiDQppbXBvcnQge21hcFN0YXRlfSBmcm9tICd2dWV4Jw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJzZWxsLWRyYXdlci1tYW5hZ2UtZWRpdCIsDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoew0KICAgICAgc2VsbERyYXdlck1hbmFnZTogc3RhdGUgPT4gc3RhdGVbJ3NlbGwtZHJhd2VyLW1hbmFnZS9zZWxsLWRyYXdlci1tYW5hZ2UnXS5zZWxsRHJhd2VyTWFuYWdlDQogICAgfSkNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICAvLyDpqozor4HnqboNCiAgICBjb25zdCB2YWxpZGF0ZUVtcHR5ID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgaWYgKCF2YWx1ZS50cmltKCkpIHsNCiAgICAgICAgaWYgKHJ1bGUuZmllbGQgPT09ICdjYWJpbmV0X25hbWUnKSB7DQogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXllK7otKfmn5zlkI3np7AnKSkNCiAgICAgICAgfQ0KICAgICAgICBpZiAocnVsZS5maWVsZCA9PT0gJ2RldmljZV9zbicpIHsNCiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeiuvuWkh+W6j+WIl+WPtycpKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBjYWxsYmFjaygpDQogICAgfQ0KICAgIHJldHVybiB7DQogICAgICAvLyDpl6jlupfliJfooajmlbDmja4NCiAgICAgIHN0b3JlQXJyOiBbXSwNCiAgICAgIC8vIOaIv+mXtOWIl+ihqOaVsOaNrg0KICAgICAgcm9vbUFycjogW10sDQogICAgICBmb3JtOiB7fSwNCiAgICAgIGZvcm1SdWxlczogew0KICAgICAgICBjYWJpbmV0X25hbWU6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWUrui0p+afnOWQjeensCcNCiAgICAgICAgfSwgew0KICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVFbXB0eQ0KICAgICAgICB9XSwNCiAgICAgICAgZGV2aWNlX3NuOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXorr7lpIfluo/liJflj7cnDQogICAgICAgIH0sIHsNCiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlRW1wdHkNCiAgICAgICAgfV0sDQogICAgICAgIHN0b3JlX2lkOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6npl6jlupflkI3np7AnDQogICAgICAgIH1dLA0KICAgICAgICByb29tX2lkOiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmiL/pl7TlkI3np7AnDQogICAgICAgIH1dDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g5o+Q5LqkDQogICAgc3VibWl0KCkgew0KICAgICAgdGhpcy4kcmVmc1snZm9ybSddLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgYXdhaXQgZWRpdFNlbGxEcmF3ZXIodGhpcy5mb3JtKS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJykNCiAgICAgICAgICAgIHRoaXMuYmFjaygpDQogICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOi/lOWbng0KICAgIGJhY2soKSB7DQogICAgICB0aGlzLiRlbWl0KCdjb21wb25lbnRzQ2hhbmdlJywgJ2luZGV4JykNCiAgICB9LA0KICAgIC8vIOiOt+WPlumXqOW6l+WIl+ihqA0KICAgIGFzeW5jIGdldFN0b3JlTGlzdCgpIHsNCiAgICAgIGF3YWl0IGdldFN0b3JlTGlzdCgpLnRoZW4oZGF0YSA9PiB7DQogICAgICAgIHRoaXMuc3RvcmVBcnIgPSBkYXRhLmxpc3QNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDojrflj5bmiL/pl7TliJfooagNCiAgICBhc3luYyBnZXRSb29tTGlzdCgpIHsNCiAgICAgIGF3YWl0IGdldFJvb21MaXN0KHsNCiAgICAgICAgc3RvcmVfaWQ6IHRoaXMuc2VsbERyYXdlck1hbmFnZS5zdG9yZV9pZA0KICAgICAgfSkudGhlbigoZGF0YSkgPT4gew0KICAgICAgICB0aGlzLnJvb21BcnIgPSBkYXRhLmxpc3QNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDojrflj5bmiL/pl7TliJfooagNCiAgICBhc3luYyBzdG9yZUNoYW5nZShzdG9yZV9pZCkgew0KICAgICAgdGhpcy5mb3JtLnJvb21faWQgPSAnJw0KICAgICAgYXdhaXQgZ2V0Um9vbUxpc3Qoew0KICAgICAgICBzdG9yZV9pZA0KICAgICAgfSkudGhlbigoZGF0YSkgPT4gew0KICAgICAgICB0aGlzLnJvb21BcnIgPSBkYXRhLmxpc3QNCiAgICAgIH0pDQogICAgfQ0KICB9LA0KICBhc3luYyBtb3VudGVkKCkgew0KICAgIHRoaXMuZm9ybSA9IHRoaXMuc2VsbERyYXdlck1hbmFnZQ0KICAgIGF3YWl0IHRoaXMuZ2V0U3RvcmVMaXN0KCkNCiAgICBhd2FpdCB0aGlzLmdldFJvb21MaXN0KCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["sell-drawer-manage-edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sell-drawer-manage-edit.vue","sourceRoot":"src/views/sell-drawer-manage","sourcesContent":["<template>\r\n  <div class=\"sell-drawer-manage-edit\">\r\n    <el-button @click=\"back\" icon=\"el-icon-back\">返回售货柜列表</el-button>\r\n    <el-row type=\"flex\" justify=\"center\">\r\n      <el-col :span=\"8\">\r\n        <el-form ref=\"form\" :model=\"form\" :rules=\"formRules\" label-width=\"100px\">\r\n          <el-form-item label=\"售货柜名称\" prop=\"cabinet_name\">\r\n            <el-input placeholder=\"请输入售货柜名称\" maxlength=\"25\" v-model=\"form.cabinet_name\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"设备序列号\" prop=\"device_sn\">\r\n            <el-input placeholder=\"请输入设备序列号\" maxlength=\"25\" v-model=\"form.device_sn\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"所属门店\" prop=\"store_id\">\r\n            <el-select v-model=\"form.store_id\" placeholder=\"请选择门店名称\" filterable clearable @change=\"storeChange\">\r\n              <el-option v-for=\"item in storeArr\" :label=\"item.store_name\" :value=\"item.store_id\" :key=\"item.store_id\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"所属房间\" prop=\"room_id\">\r\n            <el-select v-model=\"form.room_id\" placeholder=\"请选择房间名称\" filterable clearable>\r\n              <el-option v-for=\"item in roomArr\" :label=\"item.room_name\" :value=\"item.room_id\" :key=\"item.room_id\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button @click=\"back\">返回</el-button>\r\n            <el-button type=\"primary\" @click=\"submit\">立即修改</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getStoreList} from \"@/api/store-manage/store-manage\"\r\nimport {getRoomList} from \"@/api/store-manage/room-manage\"\r\nimport {editSellDrawer} from \"@/api/sell-drawer-manage/sell-drawer-manage\"\r\nimport {mapState} from 'vuex'\r\n\r\nexport default {\r\n  name: \"sell-drawer-manage-edit\",\r\n  computed: {\r\n    ...mapState({\r\n      sellDrawerManage: state => state['sell-drawer-manage/sell-drawer-manage'].sellDrawerManage\r\n    })\r\n  },\r\n  data() {\r\n    // 验证空\r\n    const validateEmpty = (rule, value, callback) => {\r\n      if (!value.trim()) {\r\n        if (rule.field === 'cabinet_name') {\r\n          callback(new Error('请输入售货柜名称'))\r\n        }\r\n        if (rule.field === 'device_sn') {\r\n          callback(new Error('请输入设备序列号'))\r\n        }\r\n      }\r\n      callback()\r\n    }\r\n    return {\r\n      // 门店列表数据\r\n      storeArr: [],\r\n      // 房间列表数据\r\n      roomArr: [],\r\n      form: {},\r\n      formRules: {\r\n        cabinet_name: [{\r\n          required: true,\r\n          message: '请输入售货柜名称'\r\n        }, {\r\n          validator: validateEmpty\r\n        }],\r\n        device_sn: [{\r\n          required: true,\r\n          message: '请输入设备序列号'\r\n        }, {\r\n          validator: validateEmpty\r\n        }],\r\n        store_id: [{\r\n          required: true,\r\n          message: '请选择门店名称'\r\n        }],\r\n        room_id: [{\r\n          required: true,\r\n          message: '请输入房间名称'\r\n        }]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 提交\r\n    submit() {\r\n      this.$refs['form'].validate(async valid => {\r\n        if (valid) {\r\n          await editSellDrawer(this.form).then(() => {\r\n            this.$message.success('修改成功')\r\n            this.back()\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 返回\r\n    back() {\r\n      this.$emit('componentsChange', 'index')\r\n    },\r\n    // 获取门店列表\r\n    async getStoreList() {\r\n      await getStoreList().then(data => {\r\n        this.storeArr = data.list\r\n      })\r\n    },\r\n    // 获取房间列表\r\n    async getRoomList() {\r\n      await getRoomList({\r\n        store_id: this.sellDrawerManage.store_id\r\n      }).then((data) => {\r\n        this.roomArr = data.list\r\n      })\r\n    },\r\n    // 获取房间列表\r\n    async storeChange(store_id) {\r\n      this.form.room_id = ''\r\n      await getRoomList({\r\n        store_id\r\n      }).then((data) => {\r\n        this.roomArr = data.list\r\n      })\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.form = this.sellDrawerManage\r\n    await this.getStoreList()\r\n    await this.getRoomList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}