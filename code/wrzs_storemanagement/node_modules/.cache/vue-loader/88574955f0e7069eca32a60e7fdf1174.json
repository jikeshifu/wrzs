{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\system-manage\\store-admin-manage\\admin-store-manage-add.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\system-manage\\store-admin-manage\\admin-store-manage-add.vue","mtime":1686935646985},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js","mtime":1686936410308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2FkZFN0b3JlQWRtaW59IGZyb20gIkAvYXBpL3N5c3RlbS1tYW5hZ2Uvc3RvcmUtYWRtaW4tbWFuYWdlIg0KaW1wb3J0IHtnZXRTdG9yZUxpc3R9IGZyb20gIkAvYXBpL3N0b3JlLW1hbmFnZS9zdG9yZS1tYW5hZ2UiDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImFkbWluLXN0b3JlLW1hbmFnZS1hZGQiLA0KICBkYXRhKCkgew0KICAgIC8vIOmqjOivgeepug0KICAgIGNvbnN0IHZhbGlkYXRlRW1wdHkgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICBpZiAoIXZhbHVlLnRyaW0oKSkgew0KICAgICAgICBpZiAocnVsZS5maWVsZCA9PT0gJ3VzZXJfbmFtZScpIHsNCiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeWnk+WQjScpKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBjYWxsYmFjaygpDQogICAgfQ0KICAgIC8vIOmqjOivgeaJi+acuuWPtw0KICAgIGNvbnN0IHZhbGlkYXRlTW9iaWxlID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gew0KICAgICAgaWYgKCEvXjFbMzQ1Njc4OV1cZHs5fSQvLnRlc3QodmFsdWUpKSB7DQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWlMTHkvY3mraPnoa7nmoTmiYvmnLrlj7cnKSkNCiAgICAgIH0NCiAgICAgIGNhbGxiYWNrKCkNCiAgICB9DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOmXqOW6l+WIl+ihqA0KICAgICAgc3RvcmVMaXN0OiBbXSwNCiAgICAgIGZvcm06IHsNCiAgICAgICAgdXNlcl9uYW1lOiAnJywNCiAgICAgICAgbW9iaWxlOiAnJywNCiAgICAgICAgcHc6ICcnLA0KICAgICAgICBsZXZlbDogMSwNCiAgICAgICAgc3RhdHVzOiAxLA0KICAgICAgICBzbXNfc3RhdHVzOiAwLA0KICAgICAgICBzdG9yZV9pZF9hcnI6IFtdDQogICAgICB9LA0KICAgICAgZm9ybVJ1bGVzOiB7DQogICAgICAgIHVzZXJfbmFtZTogW3sNCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5aeT5ZCNJw0KICAgICAgICB9LCB7DQogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZUVtcHR5DQogICAgICAgIH1dLA0KICAgICAgICBtb2JpbGU6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaJi+acuuWPtycNCiAgICAgICAgfSwgew0KICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVNb2JpbGUNCiAgICAgICAgfV0sDQogICAgICAgIHB3OiBbew0KICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnDQogICAgICAgIH0sIHsNCiAgICAgICAgICBtaW46IDYsDQogICAgICAgICAgbWVzc2FnZTogJ+WvhueggeiHs+Wwkei+k+WFpTbkvY0nDQogICAgICAgIH1dLA0KICAgICAgICBzdG9yZV9pZF9hcnI6IFt7DQogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqemXqOW6lycNCiAgICAgICAgfV0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBiYWNrKCkgew0KICAgICAgdGhpcy4kZW1pdCgnY29tcG9uZW50c0NoYW5nZScsICdpbmRleCcpDQogICAgfSwNCiAgICAvLyDmt7vliqDpl6jlupfnrqHnkIblkZgNCiAgICBzdWJtaXQoKSB7DQogICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBhd2FpdCBhZGRTdG9yZUFkbWluKHRoaXMuZm9ybSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOaIkOWKnycpDQogICAgICAgICAgICB0aGlzLmJhY2soKQ0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDojrflj5bpl6jlupfliJfooagNCiAgICBhc3luYyBnZXRTdG9yZUxpc3QoKSB7DQogICAgICBhd2FpdCBnZXRTdG9yZUxpc3QoKS50aGVuKGRhdGEgPT4gew0KICAgICAgICB0aGlzLnN0b3JlTGlzdCA9IGRhdGEubGlzdA0KICAgICAgfSkNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRTdG9yZUxpc3QoKQ0KICB9DQp9DQo="},{"version":3,"sources":["admin-store-manage-add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin-store-manage-add.vue","sourceRoot":"src/views/system-manage/store-admin-manage","sourcesContent":["<template>\r\n  <div class=\"admin-store-manage-add\">\r\n    <el-button @click=\"back\" icon=\"el-icon-back\">返回门店管理员列表</el-button>\r\n    <el-row type=\"flex\" justify=\"center\">\r\n      <el-col :span=\"8\">\r\n        <el-form ref=\"form\" :model=\"form\" :rules=\"formRules\" label-width=\"100px\">\r\n          <el-form-item label=\"姓名\" prop=\"user_name\">\r\n            <el-input placeholder=\"请输入姓名\" maxlength=\"25\" v-model=\"form.user_name\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"手机号\" prop=\"mobile\">\r\n            <el-input placeholder=\"请输入手机号\" maxlength=\"11\" v-model=\"form.mobile\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"密码\" prop=\"pw\">\r\n            <el-input type=\"password\" placeholder=\"请输入密码\" maxlength=\"30\" v-model=\"form.pw\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"状态\" prop=\"status\">\r\n            <el-radio v-model=\"form.status\" :label=\"0\">禁用</el-radio>\r\n            <el-radio v-model=\"form.status\" :label=\"1\">启用</el-radio>\r\n          </el-form-item>\r\n          <el-form-item label=\"级别\" prop=\"level\">\r\n            <el-radio v-model=\"form.level\" :label=\"1\">普通管理</el-radio>\r\n            <el-radio v-model=\"form.level\" :label=\"0\">超级管理</el-radio>\r\n          </el-form-item>\r\n          <el-form-item label=\"短信通知\" prop=\"sms_status\">\r\n            <el-radio v-model=\"form.sms_status\" :label=\"0\">不通知</el-radio>\r\n            <el-radio v-model=\"form.sms_status\" :label=\"1\">通知</el-radio>\r\n          </el-form-item>\r\n          <el-form-item label=\"选择门店\" prop=\"store_id_arr\">\r\n            <el-select style=\"width:100%\" v-model=\"form.store_id_arr\" multiple placeholder=\"请选择要管理的门店\" filterable>\r\n              <el-option\r\n                v-for=\"item in storeList\"\r\n                :key=\"item.store_id\"\r\n                :label=\"item.store_name\"\r\n                :value=\"item.store_id\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button @click=\"back\">返回</el-button>\r\n            <el-button type=\"primary\" @click=\"submit\">立即添加</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {addStoreAdmin} from \"@/api/system-manage/store-admin-manage\"\r\nimport {getStoreList} from \"@/api/store-manage/store-manage\"\r\n\r\nexport default {\r\n  name: \"admin-store-manage-add\",\r\n  data() {\r\n    // 验证空\r\n    const validateEmpty = (rule, value, callback) => {\r\n      if (!value.trim()) {\r\n        if (rule.field === 'user_name') {\r\n          callback(new Error('请输入姓名'))\r\n        }\r\n      }\r\n      callback()\r\n    }\r\n    // 验证手机号\r\n    const validateMobile = (rule, value, callback) => {\r\n      if (!/^1[3456789]\\d{9}$/.test(value)) {\r\n        callback(new Error('请输入11位正确的手机号'))\r\n      }\r\n      callback()\r\n    }\r\n    return {\r\n      // 门店列表\r\n      storeList: [],\r\n      form: {\r\n        user_name: '',\r\n        mobile: '',\r\n        pw: '',\r\n        level: 1,\r\n        status: 1,\r\n        sms_status: 0,\r\n        store_id_arr: []\r\n      },\r\n      formRules: {\r\n        user_name: [{\r\n          required: true,\r\n          message: '请输入姓名'\r\n        }, {\r\n          validator: validateEmpty\r\n        }],\r\n        mobile: [{\r\n          required: true,\r\n          message: '请输入手机号'\r\n        }, {\r\n          validator: validateMobile\r\n        }],\r\n        pw: [{\r\n          required: true,\r\n          message: '请输入密码'\r\n        }, {\r\n          min: 6,\r\n          message: '密码至少输入6位'\r\n        }],\r\n        store_id_arr: [{\r\n          required: true,\r\n          message: '请选择门店'\r\n        }]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    back() {\r\n      this.$emit('componentsChange', 'index')\r\n    },\r\n    // 添加门店管理员\r\n    submit() {\r\n      this.$refs['form'].validate(async valid => {\r\n        if (valid) {\r\n          await addStoreAdmin(this.form).then(() => {\r\n            this.$message.success('添加成功')\r\n            this.back()\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 获取门店列表\r\n    async getStoreList() {\r\n      await getStoreList().then(data => {\r\n        this.storeList = data.list\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getStoreList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}