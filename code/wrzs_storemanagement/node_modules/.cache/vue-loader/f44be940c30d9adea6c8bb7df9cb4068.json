{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\system-manage\\store-admin-manage\\admin-store-manage-index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\system-manage\\store-admin-manage\\admin-store-manage-index.vue","mtime":1686935646986},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js","mtime":1686936410308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFN0b3JlQWRtaW5MaXN0LCBkZWxTdG9yZUFkbWluLCBzbXNFZGl0LCBlZGl0U3RvcmVBZG1TdGF0dXMsIGVkaXRQd2R9IGZyb20gIkAvYXBpL3N5c3RlbS1tYW5hZ2Uvc3RvcmUtYWRtaW4tbWFuYWdlIg0KaW1wb3J0IHtnZXRTdG9yZUxpc3R9IGZyb20gIkAvYXBpL3N0b3JlLW1hbmFnZS9zdG9yZS1tYW5hZ2UiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJhZG1pbi1zdG9yZS1tYW5hZ2UtaW5kZXgiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzdG9yZUxpc3Q6IFtdLA0KICAgICAgdGFibGVEYXRhOiB7DQogICAgICAgIHN0b3JlX2lkOiAnJywNCiAgICAgICAgdXNlcl9uYW1lOiAnJywNCiAgICAgICAgbW9iaWxlOiAnJw0KICAgICAgfSwNCiAgICAgIC8vIOS/ruaUueWvhueggeW8ueeqlw0KICAgICAgZWRpdFB3ZERpYWxvZzogew0KICAgICAgICBzaG93OiBmYWxzZSwNCiAgICAgICAgZm9ybTogew0KICAgICAgICAgIHB3OiAnJywNCiAgICAgICAgICBzdG9yZV9hZG1pbl9pZDogJycNCiAgICAgICAgfSwNCiAgICAgICAgZm9ybVJ1bGVzOiB7DQogICAgICAgICAgcHc6IFt7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnDQogICAgICAgICAgfSwgew0KICAgICAgICAgICAgbWluOiA2LA0KICAgICAgICAgICAgbWVzc2FnZTogJ+WvhueggeiHs+Wwkei+k+WFpTbkvY0nDQogICAgICAgICAgfV0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOafpeaJvg0KICAgIHN1Ym1pdFNlYXJjaCgpIHsNCiAgICAgIHRoaXMuTWl4X3RhYmxlRGF0YS5jdXJyZW50UGFnZSA9IDENCiAgICAgIHRoaXMuZ2V0U3RvcmVBZG1pbkxpc3QoKQ0KICAgIH0sDQogICAgLy8g6YeN572u5pWw5o2uDQogICAgcmVzZXREYXRhKCkgew0KICAgICAgdGhpcy50YWJsZURhdGEuc3RvcmVfaWQgPSAnJw0KICAgICAgdGhpcy50YWJsZURhdGEudXNlcl9uYW1lID0gJycNCiAgICAgIHRoaXMudGFibGVEYXRhLm1vYmlsZSA9ICcnDQogICAgfSwNCiAgICAvLyDmj5DkuqTkv67mlLnlr4bnoIENCiAgICBzdWJtaXRFZGl0UHdkRGlhbG9nKCkgew0KICAgICAgdGhpcy4kcmVmc1snZWRpdFB3ZERpYWxvZyddLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgYXdhaXQgZWRpdFB3ZCh0aGlzLmVkaXRQd2REaWFsb2cuZm9ybSkudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpDQogICAgICAgICAgICB0aGlzLiRyZWZzWydlZGl0UHdkRGlhbG9nJ10ucmVzZXRGaWVsZHMoKQ0KICAgICAgICAgICAgdGhpcy5lZGl0UHdkRGlhbG9nLnNob3cgPSBmYWxzZQ0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDpmpDol4/lvLnnqpcNCiAgICBoaWRlRWRpdFB3ZERpYWxvZygpIHsNCiAgICAgIHRoaXMuZWRpdFB3ZERpYWxvZy5zaG93ID0gZmFsc2UNCiAgICAgIHRoaXMuJHJlZnNbJ2VkaXRQd2REaWFsb2cnXS5yZXNldEZpZWxkcygpDQogICAgfSwNCiAgICAvLyDpl6jlupfnrqHnkIblkZjnirbmgIHmlLnlj5gNCiAgICBhc3luYyBzdGF0dXNDaGFuZ2UoaXRlbSkgew0KICAgICAgYXdhaXQgZWRpdFN0b3JlQWRtU3RhdHVzKHsNCiAgICAgICAgc3RvcmVfYWRtaW5faWQ6IGl0ZW0uc3RvcmVfYWRtaW5faWQsDQogICAgICAgIHN0YXR1czogaXRlbS5zdGF0dXMNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKnycpDQogICAgICAgIHRoaXMuZ2V0U3RvcmVBZG1pbkxpc3QoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOefreS/oemAmuefpeaUueWPmA0KICAgIGFzeW5jIHNtc0NoYW5nZShpdGVtKSB7DQogICAgICBhd2FpdCBzbXNFZGl0KHsNCiAgICAgICAgc3RvcmVfYWRtaW5faWQ6IGl0ZW0uc3RvcmVfYWRtaW5faWQsDQogICAgICAgIHNtc19zdGF0dXM6IGl0ZW0uc21zX3N0YXR1cw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJykNCiAgICAgICAgdGhpcy5nZXRTdG9yZUFkbWluTGlzdCgpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5L+u5pS55a+G56CBDQogICAgZWRpdFB3ZChzdG9yZV9hZG1pbl9pZCkgew0KICAgICAgdGhpcy5lZGl0UHdkRGlhbG9nLnNob3cgPSB0cnVlDQogICAgICB0aGlzLmVkaXRQd2REaWFsb2cuZm9ybS5zdG9yZV9hZG1pbl9pZCA9IHN0b3JlX2FkbWluX2lkDQogICAgfSwNCiAgICAvLyDmt7vliqDnrqHnkIblkZgNCiAgICBhZGRTdG9yZUFkbSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ2NvbXBvbmVudHNDaGFuZ2UnLCAnYWRkJykNCiAgICB9LA0KICAgIC8vIOe8lui+keeuoeeQhuWRmA0KICAgIGFzeW5jIGVkaXRTdG9yZUFkbShkYXRhKSB7DQogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc3lzdGVtLW1hbmFnZS9zdG9yZS1hZG1pbi1tYW5hZ2Uvc2V0U3RvcmVBZG1pbkRhdGEnLCBkYXRhKQ0KICAgICAgdGhpcy4kZW1pdCgnY29tcG9uZW50c0NoYW5nZScsICdlZGl0JykNCiAgICB9LA0KICAgIC8vIOWIoOmZpOmXqOW6l+euoeeQhuWRmA0KICAgIGRlbFN0b3JlQWRtKHN0b3JlX2FkbWluX2lkKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfmgqjnoa7lrpropoHliKDpmaTor6XnrqHnkIblkZjlkJc/JywgJ+a4qemmqOaPkOekuicsIHsNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgYXdhaXQgZGVsU3RvcmVBZG1pbih7DQogICAgICAgICAgc3RvcmVfYWRtaW5faWQNCiAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKQ0KICAgICAgICAgIHRoaXMuTWl4X3RhYmxlRGF0YS5jdXJyZW50UGFnZSA9IDENCiAgICAgICAgICB0aGlzLmdldFN0b3JlQWRtaW5MaXN0KCkNCiAgICAgICAgfSkNCiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KQ0KICAgIH0sDQogICAgLy8g6I635Y+W6Zeo5bqX566h55CG5ZGY5YiX6KGoDQogICAgYXN5bmMgZ2V0U3RvcmVBZG1pbkxpc3QoKSB7DQogICAgICBhd2FpdCBnZXRTdG9yZUFkbWluTGlzdCh7DQogICAgICAgIHBhZ2U6IHRoaXMuTWl4X3RhYmxlRGF0YS5jdXJyZW50UGFnZSwNCiAgICAgICAgbGltaXQ6IHRoaXMuTWl4X3RhYmxlRGF0YS5wYWdlU2l6ZSwNCiAgICAgICAgc3RvcmVfaWQ6IHRoaXMudGFibGVEYXRhLnN0b3JlX2lkLA0KICAgICAgICB1c2VyX25hbWU6IHRoaXMudGFibGVEYXRhLnVzZXJfbmFtZSwNCiAgICAgICAgbW9iaWxlOiB0aGlzLnRhYmxlRGF0YS5tb2JpbGUNCiAgICAgIH0pLnRoZW4oKGRhdGEpID0+IHsNCiAgICAgICAgdGhpcy5NaXhfdGFibGVEYXRhLmxpc3QgPSBkYXRhLmxpc3QNCiAgICAgICAgdGhpcy5NaXhfdGFibGVEYXRhLnRvdGFsID0gZGF0YS5jb3VudA0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOiOt+WPlumXqOW6l+WIl+ihqA0KICAgIGFzeW5jIGdldFN0b3JlTGlzdCgpIHsNCiAgICAgIGF3YWl0IGdldFN0b3JlTGlzdCgpLnRoZW4oKGRhdGEpID0+IHsNCiAgICAgICAgdGhpcy5zdG9yZUxpc3QgPSBkYXRhLmxpc3QNCiAgICAgIH0pDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZ2V0U3RvcmVBZG1pbkxpc3QoKQ0KICAgIHRoaXMuZ2V0U3RvcmVMaXN0KCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["admin-store-manage-index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin-store-manage-index.vue","sourceRoot":"src/views/system-manage/store-admin-manage","sourcesContent":["<template>\r\n  <div class=\"admin-store-manage-index\">\r\n    <el-button type=\"primary\" icon=\"el-icon-circle-plus-outline\" @click=\"addStoreAdm\">添加门店管理员</el-button>\r\n    <el-button type=\"warning\" icon=\"el-icon-edit\" :disabled=\"Mix_tableData.selectionIds.length !== 1\" @click=\"editStoreAdm(Mix_tableData.selectionObj[0])\">编辑</el-button>\r\n    <el-button type=\"danger\" icon=\"el-icon-delete\" :disabled=\"!Mix_tableData.selectionIds.length\" @click=\"delStoreAdm(Mix_tableData.selectionIds)\">批量删除</el-button>\r\n    <el-select v-model=\"tableData.store_id\" placeholder=\"选择门店\" filterable clearable>\r\n      <el-option\r\n        v-for=\"item in storeList\"\r\n        :key=\"item.store_id\"\r\n        :label=\"item.store_name\"\r\n        :value=\"item.store_id\">\r\n      </el-option>\r\n    </el-select>\r\n    <el-input style=\"width:200px\" placeholder=\"姓名\" v-model=\"tableData.user_name\" maxlength=\"20\"></el-input>\r\n    <el-input style=\"width:200px\" placeholder=\"手机号\" v-model=\"tableData.mobile\" maxlength=\"11\"></el-input>\r\n    <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"submitSearch\">查询</el-button>\r\n    <el-button type=\"primary\" icon=\"el-icon-refresh-right\" @click=\"resetData\">重置</el-button>\r\n    <el-table class=\"mt15\" border height=\"calc(100vh - 225px)\" :data=\"Mix_tableData.list\" @selection-change=\"$selectionChange($event, 'store_admin_id')\">\r\n      <el-table-column type=\"selection\" width=\"50\" align=\"center\"></el-table-column>\r\n      <el-table-column label=\"ID\" prop=\"store_admin_id\"></el-table-column>\r\n      <el-table-column label=\"姓名\" prop=\"user_name\"></el-table-column>\r\n      <el-table-column label=\"手机号\" prop=\"mobile\"></el-table-column>\r\n      <el-table-column label=\"短信通知\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch\r\n            v-model=\"scope.row.sms_status\"\r\n            active-color=\"#13ce66\"\r\n            inactive-color=\"#c9c9c9\"\r\n            :active-value=\"1\"\r\n            :inactive-value=\"0\"\r\n            @change=\"smsChange(scope.row)\"\r\n          >\r\n          </el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch\r\n            v-model=\"scope.row.status\"\r\n            active-color=\"#13ce66\"\r\n            inactive-color=\"#c9c9c9\"\r\n            :active-value=\"1\"\r\n            :inactive-value=\"0\"\r\n            @change=\"statusChange(scope.row)\"\r\n          >\r\n          </el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" type=\"action\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" icon=\"el-icon-refresh\" size=\"mini\" @click=\"editPwd(scope.row.store_admin_id)\">修改密码</el-button>\r\n          <el-button type=\"warning\" icon=\"el-icon-edit\" size=\"mini\" @click=\"editStoreAdm(scope.row)\">编辑</el-button>\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"delStoreAdm([scope.row.store_admin_id])\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <Pagination :tableData=\"Mix_tableData\" @pageChange=\"$pageChange\" :getList=\"getStoreAdminList\"></Pagination>\r\n    <el-dialog\r\n      title=\"修改密码\"\r\n      :visible.sync=\"editPwdDialog.show\"\r\n      width=\"40%\">\r\n      <el-form ref=\"editPwdDialog\" :model=\"editPwdDialog.form\" :rules=\"editPwdDialog.formRules\" label-width=\"100px\">\r\n        <el-form-item label=\"新密码\" prop=\"pw\">\r\n          <el-input v-model=\"editPwdDialog.form.pw\" type=\"password\" maxlength=\"30\" placeholder=\"请输入新密码\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"hideEditPwdDialog\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitEditPwdDialog\">确定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getStoreAdminList, delStoreAdmin, smsEdit, editStoreAdmStatus, editPwd} from \"@/api/system-manage/store-admin-manage\"\r\nimport {getStoreList} from \"@/api/store-manage/store-manage\";\r\n\r\nexport default {\r\n  name: \"admin-store-manage-index\",\r\n  data() {\r\n    return {\r\n      storeList: [],\r\n      tableData: {\r\n        store_id: '',\r\n        user_name: '',\r\n        mobile: ''\r\n      },\r\n      // 修改密码弹窗\r\n      editPwdDialog: {\r\n        show: false,\r\n        form: {\r\n          pw: '',\r\n          store_admin_id: ''\r\n        },\r\n        formRules: {\r\n          pw: [{\r\n            required: true,\r\n            message: '请输入密码'\r\n          }, {\r\n            min: 6,\r\n            message: '密码至少输入6位'\r\n          }]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 查找\r\n    submitSearch() {\r\n      this.Mix_tableData.currentPage = 1\r\n      this.getStoreAdminList()\r\n    },\r\n    // 重置数据\r\n    resetData() {\r\n      this.tableData.store_id = ''\r\n      this.tableData.user_name = ''\r\n      this.tableData.mobile = ''\r\n    },\r\n    // 提交修改密码\r\n    submitEditPwdDialog() {\r\n      this.$refs['editPwdDialog'].validate(async valid => {\r\n        if (valid) {\r\n          await editPwd(this.editPwdDialog.form).then(() => {\r\n            this.$message.success('修改成功')\r\n            this.$refs['editPwdDialog'].resetFields()\r\n            this.editPwdDialog.show = false\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 隐藏弹窗\r\n    hideEditPwdDialog() {\r\n      this.editPwdDialog.show = false\r\n      this.$refs['editPwdDialog'].resetFields()\r\n    },\r\n    // 门店管理员状态改变\r\n    async statusChange(item) {\r\n      await editStoreAdmStatus({\r\n        store_admin_id: item.store_admin_id,\r\n        status: item.status\r\n      }).then(() => {\r\n        this.$message.success('修改成功')\r\n        this.getStoreAdminList()\r\n      })\r\n    },\r\n    // 短信通知改变\r\n    async smsChange(item) {\r\n      await smsEdit({\r\n        store_admin_id: item.store_admin_id,\r\n        sms_status: item.sms_status\r\n      }).then(() => {\r\n        this.$message.success('修改成功')\r\n        this.getStoreAdminList()\r\n      })\r\n    },\r\n    // 修改密码\r\n    editPwd(store_admin_id) {\r\n      this.editPwdDialog.show = true\r\n      this.editPwdDialog.form.store_admin_id = store_admin_id\r\n    },\r\n    // 添加管理员\r\n    addStoreAdm() {\r\n      this.$emit('componentsChange', 'add')\r\n    },\r\n    // 编辑管理员\r\n    async editStoreAdm(data) {\r\n      await this.$store.dispatch('system-manage/store-admin-manage/setStoreAdminData', data)\r\n      this.$emit('componentsChange', 'edit')\r\n    },\r\n    // 删除门店管理员\r\n    delStoreAdm(store_admin_id) {\r\n      this.$confirm('您确定要删除该管理员吗?', '温馨提示', {\r\n        type: 'warning'\r\n      }).then(async () => {\r\n        await delStoreAdmin({\r\n          store_admin_id\r\n        }).then(() => {\r\n          this.$message.success('删除成功')\r\n          this.Mix_tableData.currentPage = 1\r\n          this.getStoreAdminList()\r\n        })\r\n      }).catch(() => {})\r\n    },\r\n    // 获取门店管理员列表\r\n    async getStoreAdminList() {\r\n      await getStoreAdminList({\r\n        page: this.Mix_tableData.currentPage,\r\n        limit: this.Mix_tableData.pageSize,\r\n        store_id: this.tableData.store_id,\r\n        user_name: this.tableData.user_name,\r\n        mobile: this.tableData.mobile\r\n      }).then((data) => {\r\n        this.Mix_tableData.list = data.list\r\n        this.Mix_tableData.total = data.count\r\n      })\r\n    },\r\n    // 获取门店列表\r\n    async getStoreList() {\r\n      await getStoreList().then((data) => {\r\n        this.storeList = data.list\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getStoreAdminList()\r\n    this.getStoreList()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}