{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\order-manage\\shgsp-order-manage\\shgsp-order-manage-index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\order-manage\\shgsp-order-manage\\shgsp-order-manage-index.vue","mtime":1686935646977},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js","mtime":1686936410308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFNIR1NQT3JkZXJMaXN0LCBjYW5jZWxPcmRlciB9IGZyb20gJ0AvYXBpL29yZGVyLW1hbmFnZS9zaGdzcC1vcmRlci1tYW5hZ2UuanMnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInNoZ3NwLW9yZGVyLW1hbmFnZS1pbmRleCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRyYXdlcjogewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIG9yZGVyQ2FiaW5ldDogewogICAgICAgICAgICBnb29kc19pbmZvOiB7CiAgICAgICAgICAgICAgY2FiaW5ldDoge30KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5p+l55yL5ZWG5ZOBCiAgICBjaGVja0dvb2RzKGRhdGEpIHsKICAgICAgdGhpcy5kcmF3ZXIuZGF0YSA9IGRhdGEKICAgICAgdGhpcy5kcmF3ZXIuc2hvdyA9IHRydWUKICAgIH0sCiAgICAvLyDlj5bmtojorqLljZUKICAgIGNhbmNlbE9yZGVyKG9yZGVyX2lkKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aCqOehruWumuimgeWPlua2iOivpeiuouWNleWQlz8nLCAn5rip6aao5o+Q56S6JywgewogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICBhd2FpdCBjYW5jZWxPcmRlcih7CiAgICAgICAgICBvcmRlcl9pZAogICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCflt7Llj5bmtognKQogICAgICAgICAgdGhpcy5NaXhfdGFibGVEYXRhLmN1cnJlbnRQYWdlID0gMQogICAgICAgICAgdGhpcy5nZXRTSEdTUE9yZGVyTGlzdCgpCiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goKCkgPT4ge30pCiAgICB9LAogICAgLy8g6I635Y+W5ZSu6LSn5p+c5ZWG5ZOB6K6i5Y2V5YiX6KGoCiAgICBhc3luYyBnZXRTSEdTUE9yZGVyTGlzdCgpIHsKICAgICAgYXdhaXQgZ2V0U0hHU1BPcmRlckxpc3QoewogICAgICAgIHBhZ2U6IHRoaXMuTWl4X3RhYmxlRGF0YS5jdXJyZW50UGFnZSwKICAgICAgICBsaW1pdDogdGhpcy5NaXhfdGFibGVEYXRhLnBhZ2VTaXplCiAgICAgIH0pLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgdGhpcy5NaXhfdGFibGVEYXRhLmxpc3QgPSBkYXRhLmxpc3QKICAgICAgICB0aGlzLk1peF90YWJsZURhdGEudG90YWwgPSBkYXRhLmNvdW50CiAgICAgIH0pCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRTSEdTUE9yZGVyTGlzdCgpCiAgfQp9Cg=="},{"version":3,"sources":["shgsp-order-manage-index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shgsp-order-manage-index.vue","sourceRoot":"src/views/order-manage/shgsp-order-manage","sourcesContent":["<template>\r\n  <div class=\"shgsp-order-manage-index\">\r\n    <el-table border height=\"calc(100vh - 170px)\" :data=\"Mix_tableData.list\">\r\n      <el-table-column label=\"订单ID\" prop=\"order_id\"></el-table-column>\r\n      <el-table-column label=\"订单号\" prop=\"order_sn\"></el-table-column>\r\n      <el-table-column label=\"订单价格(元)\" prop=\"order_price\"></el-table-column>\r\n      <el-table-column label=\"支付方式\">\r\n        <template slot-scope=\"scope\">\r\n          <div class=\"pay-type\" v-if=\"scope.row.pay_type === 'balance'\"><span class=\"kj kj-qb\"></span>钱包余额</div>\r\n          <div class=\"pay-type\" v-if=\"scope.row.pay_type === 'wechat'\"><span class=\"kj kj-wechat\"></span>微信</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"订单状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag type=\"primary\" v-if=\"scope.row.order_status === 3\">已完成</el-tag>\r\n          <el-tag type=\"danger\" v-if=\"scope.row.order_status === 4\">已取消</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"售货柜锁状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag type=\"danger\" v-if=\"scope.row.orderCabinet.lock_status === 0\">异常</el-tag>\r\n          <el-tag type=\"success\" v-if=\"scope.row.orderCabinet.lock_status === 1\">正常</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"商品信息\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" size=\"mini\" @click=\"checkGoods(scope.row)\">查看</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"购买用户\">\r\n        <template slot-scope=\"scope\">\r\n          <el-popover\r\n            placement=\"top-end\"\r\n            width=\"400\"\r\n            trigger=\"click\">\r\n            <el-form label-width=\"80px\">\r\n              <el-form-item label=\"昵称\">{{ scope.row.member.nick_name }}</el-form-item>\r\n              <el-form-item label=\"头像\">\r\n                <el-image :src=\"scope.row.member.avatar_url\" fit=\"cover\" style=\"width:100px;height:100px;\" :preview-src-list=\"[scope.row.member.avatar_url]\"></el-image>\r\n              </el-form-item>\r\n              <el-form-item label=\"电话\">{{ scope.row.member.mobile }}</el-form-item>\r\n              <el-form-item label=\"地址\">{{ scope.row.member.province }}</el-form-item>\r\n            </el-form>\r\n            <el-button slot=\"reference\" type=\"text\" size=\"mini\">查看</el-button>\r\n          </el-popover>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" type=\"action\" width=\"250\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" v-if=\"scope.row.order_status === 3\" size=\"mini\" @click=\"cancelOrder(scope.row.order_id)\">取消订单</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <Pagination :tableData=\"Mix_tableData\" @pageChange=\"$pageChange\" :getList=\"getSHGSPOrderList\"></Pagination>\r\n    <el-drawer\r\n      title=\"商品信息\"\r\n      :visible.sync=\"drawer.show\"\r\n      direction=\"ltr\">\r\n      <el-form label-width=\"120upx\" style=\"padding-left:20px;padding-right:20px;\">\r\n        <el-form-item label=\"售货柜编码\">{{ drawer.data.orderCabinet.goods_info.cabinet_number }}</el-form-item>\r\n        <el-form-item label=\"售货柜名称\">{{ drawer.data.orderCabinet.goods_info.cabinet.cabinet_name }}</el-form-item>\r\n        <el-form-item label=\"商品图片\">\r\n          <el-image :src=\"baseUrl + drawer.data.orderCabinet.goods_info.goods_image\" fit=\"cover\" style=\"width:100px;height:100px;\" :preview-src-list=\"[baseUrl + drawer.data.orderCabinet.goods_info.goods_image]\"></el-image>\r\n        </el-form-item>\r\n        <el-form-item label=\"商品名称\">{{ drawer.data.orderCabinet.goods_info.goods_name }}</el-form-item>\r\n      </el-form>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { getSHGSPOrderList, cancelOrder } from '@/api/order-manage/shgsp-order-manage.js'\r\n\r\n  export default {\r\n    name: \"shgsp-order-manage-index\",\r\n    data() {\r\n      return {\r\n        drawer: {\r\n          show: false,\r\n          data: {\r\n            orderCabinet: {\r\n              goods_info: {\r\n                cabinet: {}\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      // 查看商品\r\n      checkGoods(data) {\r\n        this.drawer.data = data\r\n        this.drawer.show = true\r\n      },\r\n      // 取消订单\r\n      cancelOrder(order_id) {\r\n        this.$confirm('您确定要取消该订单吗?', '温馨提示', {\r\n          type: 'warning'\r\n        }).then(async () => {\r\n          await cancelOrder({\r\n            order_id\r\n          }).then(() => {\r\n            this.$message.success('已取消')\r\n            this.Mix_tableData.currentPage = 1\r\n            this.getSHGSPOrderList()\r\n          })\r\n        }).catch(() => {})\r\n      },\r\n      // 获取售货柜商品订单列表\r\n      async getSHGSPOrderList() {\r\n        await getSHGSPOrderList({\r\n          page: this.Mix_tableData.currentPage,\r\n          limit: this.Mix_tableData.pageSize\r\n        }).then(data => {\r\n          this.Mix_tableData.list = data.list\r\n          this.Mix_tableData.total = data.count\r\n        })\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getSHGSPOrderList()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .pay-type {\r\n    .kj {\r\n      font-size: 30px;\r\n      vertical-align: -5px;\r\n      margin-right: 5px;\r\n    }\r\n    .kj-qb {\r\n      color: #e6a23c;\r\n    }\r\n    .kj-wechat {\r\n      color: #67c23a;\r\n    }\r\n  }\r\n</style>\r\n"]}]}