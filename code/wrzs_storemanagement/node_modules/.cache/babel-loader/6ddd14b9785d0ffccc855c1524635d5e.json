{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js!D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\sell-drawer-manage\\lattice-manage\\lattice-manage-edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\sell-drawer-manage\\lattice-manage\\lattice-manage-edit.vue","mtime":1686935646979},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\babel.config.js","mtime":1686935646926},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js","mtime":1686936410308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovY29kaW5nL3dyenMvd3J6c19zdG9yZW1hbmFnZW1lbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9jb2Rpbmcvd3J6cy93cnpzX3N0b3JlbWFuYWdlbWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L2NvZGluZy93cnpzL3dyenNfc3RvcmVtYW5hZ2VtZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IFRpbnltY2UgZnJvbSAnQC9jb21wb25lbnRzL1RpbnltY2UnOwppbXBvcnQgeyBlZGl0TGF0dGljZSB9IGZyb20gIkAvYXBpL3NlbGwtZHJhd2VyLW1hbmFnZS9sYXR0aWNlLW1hbmFnZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibGF0dGljZS1tYW5hZ2UtZWRpdCIsCiAgY29tcG9uZW50czogewogICAgVGlueW1jZTogVGlueW1jZQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKHsKICAgIHNlbGxEcmF3ZXJNYW5hZ2U6IGZ1bmN0aW9uIHNlbGxEcmF3ZXJNYW5hZ2Uoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlWydzZWxsLWRyYXdlci1tYW5hZ2Uvc2VsbC1kcmF3ZXItbWFuYWdlJ10uc2VsbERyYXdlck1hbmFnZTsKICAgIH0sCiAgICBsYXR0aWNlTWFuYWdlOiBmdW5jdGlvbiBsYXR0aWNlTWFuYWdlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZVsnc2VsbC1kcmF3ZXItbWFuYWdlL2xhdHRpY2UtbWFuYWdlJ10ubGF0dGljZU1hbmFnZTsKICAgIH0KICB9KSksCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIC8vIOmqjOivgeepugogICAgdmFyIHZhbGlkYXRlRW1wdHkgPSBmdW5jdGlvbiB2YWxpZGF0ZUVtcHR5KHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAoISgnJyArIHZhbHVlKS50cmltKCkpIHsKICAgICAgICBpZiAocnVsZS5maWVsZCA9PT0gJ2NhYmluZXRfbnVtYmVyJykgewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXllYblk4HmoLznvJblj7cnKSk7CiAgICAgICAgfQogICAgICAgIGlmIChydWxlLmZpZWxkID09PSAnZ29vZHNfbmFtZScpIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5ZWG5ZOB5qC85qCH6aKYJykpOwogICAgICAgIH0KICAgICAgfQogICAgICBjYWxsYmFjaygpOwogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHt9LAogICAgICBmb3JtUnVsZXM6IHsKICAgICAgICBjYWJpbmV0X251bWJlcjogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeagvOe8luWPtycKICAgICAgICB9LCB7CiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlRW1wdHkKICAgICAgICB9XSwKICAgICAgICBnb29kc19uYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5ZWG5ZOB5qC85qCH6aKYJwogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVFbXB0eQogICAgICAgIH1dLAogICAgICAgIGdvb2RzX3ByaWNlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5ZWG5ZOB5Lu35qC8JwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGZpbGVMaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOi/lOWbngogICAgYmFjazogZnVuY3Rpb24gYmFjaygpIHsKICAgICAgdGhpcy4kZW1pdCgnY29tcG9uZW50c0NoYW5nZScsICdpbmRleCcpOwogICAgfSwKICAgIC8vIOS4iuS8oOagvOWtkOS4u+WbvuaIkOWKn+eahOmSqeWtkAogICAgdXBsb2FkU3VjY2VzczogZnVuY3Rpb24gdXBsb2FkU3VjY2VzcyhyZXMpIHsKICAgICAgdGhpcy5mb3JtLmdvb2RzX2ltYWdlID0gcmVzLmRhdGE7CiAgICB9LAogICAgLy8g5Yig6Zmk5LiK5Lyg5qC85a2Q55qE5Li75Zu+CiAgICByZW1vdmVVcGxvYWQ6IGZ1bmN0aW9uIHJlbW92ZVVwbG9hZCgpIHsKICAgICAgdGhpcy5mb3JtLmdvb2RzX2ltYWdlID0gJyc7CiAgICB9LAogICAgLy8g5o+Q5LqkCiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1snZm9ybSddLnZhbGlkYXRlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHZhbGlkKSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGVkaXRMYXR0aWNlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXMuZm9ybSksIHt9LCB7CiAgICAgICAgICAgICAgICAgIGNhYmluZXRfaWQ6IF90aGlzLnNlbGxEcmF3ZXJNYW5hZ2UuY2FiaW5ldF9pZAogICAgICAgICAgICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv67mlLnmiJDlip8nKTsKICAgICAgICAgICAgICAgICAgX3RoaXMuYmFjaygpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZm9ybSA9IHRoaXMubGF0dGljZU1hbmFnZTsKICAgIHRoaXMuZmlsZUxpc3QgPSBbewogICAgICBuYW1lOiAnJywKICAgICAgdXJsOiB0aGlzLmJhc2VVcmwgKyB0aGlzLmZvcm0uZ29vZHNfaW1hZ2UKICAgIH1dOwogIH0KfTs="},{"version":3,"names":["mapState","Tinymce","editLattice","name","components","computed","_objectSpread","sellDrawerManage","state","latticeManage","data","validateEmpty","rule","value","callback","trim","field","Error","form","formRules","cabinet_number","required","message","validator","goods_name","goods_price","fileList","methods","back","$emit","uploadSuccess","res","goods_image","removeUpload","submit","_this","$refs","validate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","valid","wrap","_callee$","_context","prev","next","cabinet_id","then","$message","success","abrupt","stop","_x","apply","arguments","mounted","url","baseUrl"],"sources":["src/views/sell-drawer-manage/lattice-manage/lattice-manage-edit.vue"],"sourcesContent":["<template>\r\n  <div class=\"lattice-manage-edit\">\r\n    <el-row type=\"flex\" justify=\"center\">\r\n      <el-col :span=\"24\">\r\n        <el-form ref=\"form\" :model=\"form\" :rules=\"formRules\" label-width=\"100px\">\r\n          <el-form-item label=\"当前售货柜\">\r\n            <el-tag type=\"primary\">{{ sellDrawerManage.cabinet_name }}</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品格编号\" prop=\"cabinet_number\">\r\n            <el-input placeholder=\"请输入商品格编号\" maxlength=\"25\" v-model=\"form.cabinet_number\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品格标题\" prop=\"goods_name\">\r\n            <el-input placeholder=\"请输入商品格标题\" maxlength=\"25\" v-model=\"form.goods_name\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品价格\" prop=\"goods_price\">\r\n            <el-input-number v-model=\"form.goods_price\" :precision=\"2\" :min=\"0\" :max=\"1000000\"></el-input-number>\r\n            <el-tag type=\"primary\">元</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品格主图\" prop=\"goods_image\">\r\n            <el-upload\r\n              :action=\"uploadURL\"\r\n              list-type=\"picture-card\"\r\n              :limit=\"1\"\r\n              :file-list=\"fileList\"\r\n              :on-remove=\"removeUpload\"\r\n              :on-success=\"uploadSuccess\">\r\n              <i class=\"el-icon-plus\"></i>\r\n            </el-upload>\r\n            <el-tag type=\"warning\">仅限上传一张</el-tag>\r\n          </el-form-item>\r\n          <el-form-item label=\"商品介绍\">\r\n            <tinymce ref=\"tinymce\" v-model=\"form.goods_about\" :height=\"300\" />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button @click=\"back\">返回商品格列表</el-button>\r\n            <el-button type=\"primary\" @click=\"submit\">立即修改</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport Tinymce from '@/components/Tinymce'\r\nimport {editLattice} from \"@/api/sell-drawer-manage/lattice-manage\"\r\n\r\nexport default {\r\n  name: \"lattice-manage-edit\",\r\n  components: {\r\n    Tinymce\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      sellDrawerManage: state => state['sell-drawer-manage/sell-drawer-manage'].sellDrawerManage,\r\n      latticeManage: state => state['sell-drawer-manage/lattice-manage'].latticeManage\r\n    })\r\n  },\r\n  data() {\r\n    // 验证空\r\n    const validateEmpty = (rule, value, callback) => {\r\n      if (!('' + value).trim()) {\r\n        if (rule.field === 'cabinet_number') {\r\n          callback(new Error('请输入商品格编号'))\r\n        }\r\n        if (rule.field === 'goods_name') {\r\n          callback(new Error('请输入商品格标题'))\r\n        }\r\n      }\r\n      callback()\r\n    }\r\n    return {\r\n      form: {},\r\n      formRules: {\r\n        cabinet_number: [{\r\n          required: true,\r\n          message: '请输入商品格编号'\r\n        }, {\r\n          validator: validateEmpty\r\n        }],\r\n        goods_name: [{\r\n          required: true,\r\n          message: '请输入商品格标题'\r\n        }, {\r\n          validator: validateEmpty\r\n        }],\r\n        goods_price: [{\r\n          required: true,\r\n          message: '请输入商品价格'\r\n        }]\r\n      },\r\n      fileList: []\r\n    }\r\n  },\r\n  methods: {\r\n    // 返回\r\n    back() {\r\n      this.$emit('componentsChange', 'index')\r\n    },\r\n    // 上传格子主图成功的钩子\r\n    uploadSuccess(res) {\r\n      this.form.goods_image = res.data\r\n    },\r\n    // 删除上传格子的主图\r\n    removeUpload() {\r\n      this.form.goods_image = ''\r\n    },\r\n    // 提交\r\n    submit() {\r\n      this.$refs['form'].validate(async valid => {\r\n        if (valid) {\r\n          await editLattice({\r\n            ...this.form,\r\n            cabinet_id: this.sellDrawerManage.cabinet_id\r\n          }).then(() => {\r\n            this.$message.success('修改成功')\r\n            this.back()\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.form = this.latticeManage\r\n    this.fileList = [{\r\n      name: '',\r\n      url: this.baseUrl + this.form.goods_image\r\n    }]\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,SAAAA,QAAA;AACA,OAAAC,OAAA;AACA,SAAAC,WAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAH,OAAA,EAAAA;EACA;EACAI,QAAA,EAAAC,aAAA,KACAN,QAAA;IACAO,gBAAA,WAAAA,iBAAAC,KAAA;MAAA,OAAAA,KAAA,0CAAAD,gBAAA;IAAA;IACAE,aAAA,WAAAA,cAAAD,KAAA;MAAA,OAAAA,KAAA,sCAAAC,aAAA;IAAA;EACA,GACA;EACAC,IAAA,WAAAA,KAAA;IACA;IACA,IAAAC,aAAA,YAAAA,cAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,WAAAD,KAAA,EAAAE,IAAA;QACA,IAAAH,IAAA,CAAAI,KAAA;UACAF,QAAA,KAAAG,KAAA;QACA;QACA,IAAAL,IAAA,CAAAI,KAAA;UACAF,QAAA,KAAAG,KAAA;QACA;MACA;MACAH,QAAA;IACA;IACA;MACAI,IAAA;MACAC,SAAA;QACAC,cAAA;UACAC,QAAA;UACAC,OAAA;QACA;UACAC,SAAA,EAAAZ;QACA;QACAa,UAAA;UACAH,QAAA;UACAC,OAAA;QACA;UACAC,SAAA,EAAAZ;QACA;QACAc,WAAA;UACAJ,QAAA;UACAC,OAAA;QACA;MACA;MACAI,QAAA;IACA;EACA;EACAC,OAAA;IACA;IACAC,IAAA,WAAAA,KAAA;MACA,KAAAC,KAAA;IACA;IACA;IACAC,aAAA,WAAAA,cAAAC,GAAA;MACA,KAAAb,IAAA,CAAAc,WAAA,GAAAD,GAAA,CAAArB,IAAA;IACA;IACA;IACAuB,YAAA,WAAAA,aAAA;MACA,KAAAf,IAAA,CAAAc,WAAA;IACA;IACA;IACAE,MAAA,WAAAA,OAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,KAAA,SAAAC,QAAA;QAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAAC,KAAA;UAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;YAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;gBAAA,KACAL,KAAA;kBAAAG,QAAA,CAAAE,IAAA;kBAAA;gBAAA;gBAAAF,QAAA,CAAAE,IAAA;gBAAA,OACA9C,WAAA,CAAAI,aAAA,CAAAA,aAAA,KACA6B,KAAA,CAAAjB,IAAA;kBACA+B,UAAA,EAAAd,KAAA,CAAA5B,gBAAA,CAAA0C;gBAAA,EACA,EAAAC,IAAA;kBACAf,KAAA,CAAAgB,QAAA,CAAAC,OAAA;kBACAjB,KAAA,CAAAP,IAAA;gBACA;cAAA;gBAAAkB,QAAA,CAAAE,IAAA;gBAAA;cAAA;gBAAA,OAAAF,QAAA,CAAAO,MAAA,WAEA;cAAA;cAAA;gBAAA,OAAAP,QAAA,CAAAQ,IAAA;YAAA;UAAA,GAAAZ,OAAA;QAAA,CAEA;QAAA,iBAAAa,EAAA;UAAA,OAAAjB,IAAA,CAAAkB,KAAA,OAAAC,SAAA;QAAA;MAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAxC,IAAA,QAAAT,aAAA;IACA,KAAAiB,QAAA;MACAvB,IAAA;MACAwD,GAAA,OAAAC,OAAA,QAAA1C,IAAA,CAAAc;IACA;EACA;AACA"}]}