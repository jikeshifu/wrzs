{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\store\\modules\\user.js","mtime":1686935646973},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\babel.config.js","mtime":1686935646926},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKLy8gaW1wb3J0IHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcicKaW1wb3J0IHsgTWVzc2FnZUJveCB9IGZyb20gImVsZW1lbnQtdWkiOwppbXBvcnQgeyB1c2VyTG9naW4gfSBmcm9tICJAL2FwaS9sb2dpbiI7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICB1c2VySW5mbzoge30KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBzZXRVc2VySW5mbzogZnVuY3Rpb24gc2V0VXNlckluZm8oc3RhdGUsIGRhdGEpIHsKICAgIHN0YXRlLnVzZXJJbmZvID0gZGF0YTsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9LAogIFNFVF9ST0xFUzogZnVuY3Rpb24gU0VUX1JPTEVTKHN0YXRlLCByb2xlcykgewogICAgc3RhdGUucm9sZXMgPSByb2xlczsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIHVzZXIgbG9naW4KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgZm9ybSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdXNlckxvZ2luKGZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgcmVzLnRva2VuKTsKICAgICAgICBzZXRUb2tlbihyZXMudG9rZW4pOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgLy8gZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8vICAgY29uc3QgeyBkYXRhIH0gPSByZXNwb25zZQogICAgICAvLwogICAgICAvLyAgIGlmICghZGF0YSkgewogICAgICAvLyAgICAgcmV0dXJuIHJlamVjdCgnVmVyaWZpY2F0aW9uIGZhaWxlZCwgcGxlYXNlIExvZ2luIGFnYWluLicpCiAgICAgIC8vICAgfQogICAgICAvLwogICAgICAvLyAgIGNvbnN0IHsgcm9sZXMsIG5hbWUsIGF2YXRhciB9ID0gZGF0YQogICAgICAvLwogICAgICAvLyAgIC8vIHJvbGVzIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXkKICAgICAgLy8gICBpZiAoIXJvbGVzIHx8IHJvbGVzLmxlbmd0aCA8PSAwKSB7CiAgICAgIC8vICAgICByZWplY3QoJ2dldEluZm86IHJvbGVzIG11c3QgYmUgYSBub24tbnVsbCBhcnJheSEnKQogICAgICAvLyAgIH0KICAgICAgLy8KICAgICAgLy8gICBjb21taXQoJ1NFVF9ST0xFUycsIHJvbGVzKQogICAgICAvLyAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKQogICAgICAvLyAgIGNvbW1pdCgnU0VUX0FWQVRBUicsIGF2YXRhcikKICAgICAgLy8gICByZXNvbHZlKGRhdGEpCiAgICAgIC8vIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgLy8gICByZWplY3QoZXJyb3IpCiAgICAgIC8vIH0pCiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9nb3V0CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGUsCiAgICAgIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2g7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAvLyBsb2dvdXQoc3RhdGUudG9rZW4pLnRoZW4oKCkgPT4gewogICAgICAvLyAgIHJlbW92ZVRva2VuKCkgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgICAvLyAgIC8vIHJlc2V0Um91dGVyKCkKICAgICAgLy8gICBjb21taXQoJ1NFVF9UT0tFTicsICcnKQogICAgICAvLyAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pCiAgICAgIC8vICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgeyByb290OiB0cnVlIH0pCiAgICAgIC8vICAgcmVzb2x2ZSgpCiAgICAgIC8vIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgLy8gICByZWplY3QoZXJyb3IpCiAgICAgIC8vIH0pCiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"names":["getToken","setToken","removeToken","MessageBox","userLogin","state","token","userInfo","mutations","SET_TOKEN","setUserInfo","data","SET_NAME","name","SET_AVATAR","avatar","SET_ROLES","roles","actions","login","_ref","form","commit","Promise","resolve","reject","then","res","catch","error","getInfo","_ref2","logout","_ref3","dispatch","root","resetToken","_ref4","namespaced"],"sources":["D:/coding/wrzs/wrzs_storemanagement/src/store/modules/user.js"],"sourcesContent":["import { getToken, setToken, removeToken } from '@/utils/auth'\r\n// import { resetRouter } from '@/router'\r\nimport { MessageBox } from \"element-ui\"\r\nimport {userLogin} from \"@/api/login\"\r\n\r\nconst state = {\r\n  token: getToken(),\r\n  userInfo: {}\r\n}\r\n\r\nconst mutations = {\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token\r\n  },\r\n  setUserInfo: (state, data) => {\r\n    state.userInfo = data\r\n  },\r\n  SET_NAME: (state, name) => {\r\n    state.name = name\r\n  },\r\n  SET_AVATAR: (state, avatar) => {\r\n    state.avatar = avatar\r\n  },\r\n  SET_ROLES: (state, roles) => {\r\n    state.roles = roles\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // user login\r\n  login({ commit }, form) {\r\n    return new Promise((resolve, reject) => {\r\n      userLogin(form).then(res => {\r\n        commit('SET_TOKEN', res.token)\r\n        setToken(res.token)\r\n        resolve()\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n\r\n  // get user info\r\n  getInfo({ commit, state }) {\r\n    return new Promise((resolve, reject) => {\r\n      // getInfo(state.token).then(response => {\r\n      //   const { data } = response\r\n      //\r\n      //   if (!data) {\r\n      //     return reject('Verification failed, please Login again.')\r\n      //   }\r\n      //\r\n      //   const { roles, name, avatar } = data\r\n      //\r\n      //   // roles must be a non-empty array\r\n      //   if (!roles || roles.length <= 0) {\r\n      //     reject('getInfo: roles must be a non-null array!')\r\n      //   }\r\n      //\r\n      //   commit('SET_ROLES', roles)\r\n      //   commit('SET_NAME', name)\r\n      //   commit('SET_AVATAR', avatar)\r\n      //   resolve(data)\r\n      // }).catch(error => {\r\n      //   reject(error)\r\n      // })\r\n    })\r\n  },\r\n\r\n  // user logout\r\n  logout({ commit, state, dispatch }) {\r\n    return new Promise((resolve, reject) => {\r\n      // logout(state.token).then(() => {\r\n      //   removeToken() // must remove  token  first\r\n      //   // resetRouter()\r\n      //   commit('SET_TOKEN', '')\r\n      //   commit('SET_ROLES', [])\r\n      //   dispatch('tagsView/delAllViews', null, { root: true })\r\n      //   resolve()\r\n      // }).catch(error => {\r\n      //   reject(error)\r\n      // })\r\n      removeToken()\r\n      commit('SET_TOKEN', '')\r\n      dispatch('tagsView/delAllViews', null, { root: true })\r\n      resolve()\r\n    })\r\n  },\r\n\r\n  // remove token\r\n  resetToken({ commit }) {\r\n    return new Promise(resolve => {\r\n      removeToken() // must remove  token  first\r\n      commit('SET_TOKEN', '')\r\n      resolve()\r\n    })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}\r\n"],"mappings":"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"}]}