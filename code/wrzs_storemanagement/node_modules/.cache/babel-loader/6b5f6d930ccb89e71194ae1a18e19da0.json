{"remainingRequest":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js!D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\store-manage\\manJian-manage\\manJian-manage-index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\src\\views\\store-manage\\manJian-manage\\manJian-manage-index.vue","mtime":1686935646982},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\babel.config.js","mtime":1686935646926},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\babel-loader\\lib\\index.js","mtime":1686936409992},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686936409160},{"path":"D:\\coding\\wrzs\\wrzs_storemanagement\\node_modules\\vue-loader\\lib\\index.js","mtime":1686936410308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovY29kaW5nL3dyenMvd3J6c19zdG9yZW1hbmFnZW1lbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9jb2Rpbmcvd3J6cy93cnpzX3N0b3JlbWFuYWdlbWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L2NvZGluZy93cnpzL3dyenNfc3RvcmVtYW5hZ2VtZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBnZXRNYW5KaWFuTGlzdCBhcyBfZ2V0TWFuSmlhbkxpc3QsIGFkZE1hbkppYW4sIGVkaXRNYW5KaWFuLCBkZWxNYW5KaWFuIGFzIF9kZWxNYW5KaWFuIH0gZnJvbSAnQC9hcGkvc3RvcmUtbWFuYWdlL21hbkppYW4tbWFuYWdlLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdtYW5KaWFuLW1hbmFnZS1pbmRleCcsCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKHsKICAgIHN0b3JlTWFuYWdlOiBmdW5jdGlvbiBzdG9yZU1hbmFnZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGVbJ3N0b3JlLW1hbmFnZS9zdG9yZS1tYW5hZ2UnXS5zdG9yZU1hbmFnZTsKICAgIH0sCiAgICByb29tTWFuYWdlOiBmdW5jdGlvbiByb29tTWFuYWdlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZVsnc3RvcmUtbWFuYWdlL3Jvb20tbWFuYWdlJ10ucm9vbU1hbmFnZTsKICAgIH0KICB9KSksCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogewogICAgICAgIGxpc3Q6IFtdLAogICAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICB0b3RhbDogMCwKICAgICAgICBzZWxlY3Rpb25PYmo6IFtdLAogICAgICAgIHNlbGVjdGlvbklkczogW10KICAgICAgfSwKICAgICAgLy8g5re75YqgL+e8lui+keW8ueeqlwogICAgICBtYW5KaWFuRGlhbG9nOiB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGZvcm06IHsKICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgIGZ1bGw6ICcnLAogICAgICAgICAgcmVkdWNlOiAnJywKICAgICAgICAgIHJlZHVjZV9pZDogJycKICAgICAgICB9LAogICAgICAgIGZvcm1SdWxlczogewogICAgICAgICAgdGl0bGU6IFt7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5qCH6aKYJwogICAgICAgICAgfV0sCiAgICAgICAgICBmdWxsOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpea7oei2s+mHkeminScKICAgICAgICAgIH1dLAogICAgICAgICAgcmVkdWNlOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeS8mOaDoOmHkeminScKICAgICAgICAgIH1dCiAgICAgICAgfSwKICAgICAgICBzaG93OiBmYWxzZQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Y+W5raI5by556qXCiAgICBoaWRlRGlhbG9nOiBmdW5jdGlvbiBoaWRlRGlhbG9nKCkgewogICAgICB0aGlzLm1hbkppYW5EaWFsb2cuc2hvdyA9IGZhbHNlOwogICAgICB0aGlzLm1hbkppYW5EaWFsb2cudGl0bGUgPSAnJzsKICAgICAgdGhpcy5tYW5KaWFuRGlhbG9nLmZ1bGwgPSAnJzsKICAgICAgdGhpcy5tYW5KaWFuRGlhbG9nLnJlZHVjZSA9ICcnOwogICAgICB0aGlzLm1hbkppYW5EaWFsb2cucmVkdWNlX2lkID0gJyc7CiAgICAgIHRoaXMuJHJlZnNbJ21hbkppYW5EaWFsb2dGb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgIH0sCiAgICAvLyDlvLnnqpfmj5DkuqQKICAgIHN1Ym1pdERpYWxvZzogZnVuY3Rpb24gc3VibWl0RGlhbG9nKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWydtYW5KaWFuRGlhbG9nRm9ybSddLnZhbGlkYXRlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKHZhbGlkKSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghKF90aGlzLm1hbkppYW5EaWFsb2cudGl0bGUgPT09ICfmt7vliqDmu6Hlh48nKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBhZGRNYW5KaWFuKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXMubWFuSmlhbkRpYWxvZy5mb3JtKSwge30sIHsKICAgICAgICAgICAgICAgICAgcm9vbV9pZDogX3RoaXMucm9vbU1hbmFnZS5yb29tX2lkCiAgICAgICAgICAgICAgICB9KSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOaIkOWKnycpOwogICAgICAgICAgICAgICAgICBfdGhpcy5oaWRlRGlhbG9nKCk7CiAgICAgICAgICAgICAgICAgIF90aGlzLnRhYmxlRGF0YS5jdXJyZW50UGFnZSA9IDE7CiAgICAgICAgICAgICAgICAgIF90aGlzLmdldE1hbkppYW5MaXN0KCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpcy5tYW5KaWFuRGlhbG9nLnRpdGxlID09PSAn57yW6L6R5ruh5YePJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZWRpdE1hbkppYW4oX3RoaXMubWFuSmlhbkRpYWxvZy5mb3JtKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CiAgICAgICAgICAgICAgICAgIF90aGlzLmhpZGVEaWFsb2coKTsKICAgICAgICAgICAgICAgICAgX3RoaXMudGFibGVEYXRhLmN1cnJlbnRQYWdlID0gMTsKICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0TWFuSmlhbkxpc3QoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfSwKICAgIC8vIOi/lOWbnuS4iuS4gOmhtQogICAgYmFjazogZnVuY3Rpb24gYmFjaygpIHsKICAgICAgdGhpcy4kZW1pdCgnYmFjaycsICdyb29tJyk7CiAgICB9LAogICAgLy8g5re75Yqg5ruh5YePCiAgICBhZGRNYW5KaWFuOiBmdW5jdGlvbiBhZGRNYW5KaWFuKCkgewogICAgICB0aGlzLm1hbkppYW5EaWFsb2cudGl0bGUgPSAn5re75Yqg5ruh5YePJzsKICAgICAgdGhpcy5tYW5KaWFuRGlhbG9nLnNob3cgPSB0cnVlOwogICAgfSwKICAgIC8vIOe8lui+kea7oeWHjwogICAgZWRpdE1hbkppYW46IGZ1bmN0aW9uIGVkaXRNYW5KaWFuKGRhdGEpIHsKICAgICAgdGhpcy5tYW5KaWFuRGlhbG9nLnRpdGxlID0gJ+e8lui+kea7oeWHjyc7CiAgICAgIHRoaXMubWFuSmlhbkRpYWxvZy5mb3JtLnRpdGxlID0gZGF0YS50aXRsZTsKICAgICAgdGhpcy5tYW5KaWFuRGlhbG9nLmZvcm0uZnVsbCA9IGRhdGEuZnVsbDsKICAgICAgdGhpcy5tYW5KaWFuRGlhbG9nLmZvcm0ucmVkdWNlID0gZGF0YS5yZWR1Y2U7CiAgICAgIHRoaXMubWFuSmlhbkRpYWxvZy5mb3JtLnJlZHVjZV9pZCA9IGRhdGEucmVkdWNlX2lkOwogICAgICB0aGlzLm1hbkppYW5EaWFsb2cuc2hvdyA9IHRydWU7CiAgICB9LAogICAgLy8g5Yig6Zmk5ruh5YePCiAgICBkZWxNYW5KaWFuOiBmdW5jdGlvbiBkZWxNYW5KaWFuKHJlZHVjZV9pZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy4kY29uZmlybSgn5oKo56Gu5a6a6KaB5Yig6Zmk6K+l5ruh5YeP5ZCXPycsICfmuKnppqjmj5DnpLonLCB7CiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF9kZWxNYW5KaWFuKHsKICAgICAgICAgICAgICAgIHJlZHVjZV9pZDogcmVkdWNlX2lkCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICBfdGhpczIudGFibGVEYXRhLmN1cnJlbnRQYWdlID0gMTsKICAgICAgICAgICAgICAgIF90aGlzMi5nZXRNYW5KaWFuTGlzdCgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkpLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0sCiAgICAvLyDojrflj5bmu6Hlh4/liJfooagKICAgIGdldE1hbkppYW5MaXN0OiBmdW5jdGlvbiBnZXRNYW5KaWFuTGlzdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF9nZXRNYW5KaWFuTGlzdCh7CiAgICAgICAgICAgICAgICByb29tX2lkOiBfdGhpczMucm9vbU1hbmFnZS5yb29tX2lkLAogICAgICAgICAgICAgICAgbGltaXQ6IF90aGlzMy50YWJsZURhdGEucGFnZVNpemUsCiAgICAgICAgICAgICAgICBwYWdlOiBfdGhpczMudGFibGVEYXRhLmN1cnJlbnRQYWdlCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgX3RoaXMzLnRhYmxlRGF0YS5saXN0ID0gZGF0YS5saXN0OwogICAgICAgICAgICAgICAgX3RoaXMzLnRhYmxlRGF0YS50b3RhbCA9IGRhdGEuY291bnQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0TWFuSmlhbkxpc3QoKTsKICB9Cn07"},{"version":3,"names":["mapState","getManJianList","addManJian","editManJian","delManJian","name","computed","_objectSpread","storeManage","state","roomManage","data","tableData","list","currentPage","pageSize","total","selectionObj","selectionIds","manJianDialog","title","form","full","reduce","reduce_id","formRules","required","message","show","methods","hideDialog","$refs","resetFields","submitDialog","_this","validate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","valid","wrap","_callee$","_context","prev","next","room_id","then","$message","success","abrupt","stop","_x","apply","arguments","back","$emit","_this2","$confirm","type","_callee2","_callee2$","_context2","catch","_this3","_callee3","_callee3$","_context3","limit","page","count","mounted"],"sources":["src/views/store-manage/manJian-manage/manJian-manage-index.vue"],"sourcesContent":["<template>\r\n  <div class=\"manJian-manage-index\">\r\n    <el-button icon=\"el-icon-back\" @click=\"back\">返回房间列表</el-button>\r\n    <el-button type=\"primary\" icon=\"el-icon-circle-plus-outline\" @click=\"addManJian\">添加满减</el-button>\r\n    <el-button type=\"warning\" icon=\"el-icon-edit\" :disabled=\"tableData.selectionIds.length !== 1\"\r\n      @click=\"editManJian(tableData.selectionObj[0])\">编辑</el-button>\r\n    <el-button type=\"danger\" icon=\"el-icon-delete\" :disabled=\"!tableData.selectionIds.length\"\r\n      @click=\"delManJian(tableData.selectionIds)\">批量删除</el-button>\r\n    <el-tag type=\"primary\">{{ `当前位置：${storeManage.store_name}，${roomManage.room_name}` }}</el-tag>\r\n    <el-table ref=\"table\" :data=\"tableData.list\" border class=\"mt15\" height=\"calc(100vh - 225px)\"\r\n      @selection-change=\"$selectionChange($event, 'reduce_id')\">\r\n      <el-table-column type=\"selection\" width=\"50\"></el-table-column>\r\n      <el-table-column align=\"center\" label=\"ID\" prop=\"reduce_id\" width=\"80\"></el-table-column>\r\n      <el-table-column label=\"标题\" prop=\"title\"></el-table-column>\r\n      <el-table-column label=\"满\" prop=\"full\"></el-table-column>\r\n      <el-table-column label=\"送\" prop=\"reduce\"></el-table-column>\r\n      <el-table-column label=\"操作\" type=\"action\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"warning\" icon=\"el-icon-edit\" size=\"mini\" @click=\"editManJian(scope.row)\">编辑</el-button>\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"delManJian([scope.row.reduce_id])\">删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <Pagination :tableData=\"tableData\" @pageChange=\"$pageChange\" :getList=\"getManJianList\"></Pagination>\r\n    <el-dialog :show-close=\"false\" :title=\"manJianDialog.title\" :visible.sync=\"manJianDialog.show\" width=\"30%\">\r\n      <el-form ref=\"manJianDialogForm\" :model=\"manJianDialog.form\" label-width=\"90px\" :rules=\"manJianDialog.formRules\">\r\n        <el-form-item label=\"标题\" prop=\"title\">\r\n          <el-input placeholder=\"请输入标题\" v-model.trim=\"manJianDialog.form.title\" maxlength=\"20\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"满\" prop=\"full\">\r\n          <el-input-number v-model=\"manJianDialog.form.full\" :min=\"1\" :max=\"50000\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"减\" prop=\"reduce\">\r\n          <el-input-number v-model=\"manJianDialog.form.reduce\" :min=\"1\" :max=\"50000\"></el-input-number>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"hideDialog\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitDialog\">确定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    mapState\r\n  } from 'vuex'\r\n  import {\r\n    getManJianList,\r\n    addManJian,\r\n    editManJian,\r\n    delManJian\r\n  } from '@/api/store-manage/manJian-manage.js'\r\n\r\n  export default {\r\n    name: 'manJian-manage-index',\r\n    computed: {\r\n      ...mapState({\r\n        storeManage: state => state['store-manage/store-manage'].storeManage,\r\n        roomManage: state => state['store-manage/room-manage'].roomManage\r\n      })\r\n    },\r\n    data() {\r\n      return {\r\n        tableData: {\r\n          list: [],\r\n          currentPage: 1,\r\n          pageSize: 10,\r\n          total: 0,\r\n          selectionObj: [],\r\n          selectionIds: []\r\n        },\r\n        // 添加/编辑弹窗\r\n        manJianDialog: {\r\n          title: '',\r\n          form: {\r\n            title: '',\r\n            full: '',\r\n            reduce: '',\r\n            reduce_id: ''\r\n          },\r\n          formRules: {\r\n            title: [{\r\n              required: true,\r\n              message: '请输入标题'\r\n            }],\r\n            full: [{\r\n              required: true,\r\n              message: '请输入满足金额'\r\n            }],\r\n            reduce: [{\r\n              required: true,\r\n              message: '请输入优惠金额'\r\n            }]\r\n          },\r\n          show: false\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      // 取消弹窗\r\n      hideDialog() {\r\n        this.manJianDialog.show = false\r\n        this.manJianDialog.title = ''\r\n        this.manJianDialog.full = ''\r\n        this.manJianDialog.reduce = ''\r\n        this.manJianDialog.reduce_id = ''\r\n        this.$refs['manJianDialogForm'].resetFields()\r\n      },\r\n      // 弹窗提交\r\n      submitDialog() {\r\n        this.$refs['manJianDialogForm'].validate(async valid => {\r\n          if (valid) {\r\n            if (this.manJianDialog.title === '添加满减') {\r\n              await addManJian({\r\n                ...this.manJianDialog.form,\r\n                room_id: this.roomManage.room_id\r\n              }).then(() => {\r\n                this.$message.success('添加成功')\r\n                this.hideDialog()\r\n                this.tableData.currentPage = 1\r\n                this.getManJianList()\r\n              })\r\n            }\r\n            if (this.manJianDialog.title === '编辑满减') {\r\n              await editManJian(this.manJianDialog.form).then(() => {\r\n                this.$message.success('修改成功')\r\n                this.hideDialog()\r\n                this.tableData.currentPage = 1\r\n                this.getManJianList()\r\n              })\r\n            }\r\n          } else {\r\n            return false\r\n          }\r\n        })\r\n      },\r\n      // 返回上一页\r\n      back() {\r\n        this.$emit('back', 'room')\r\n      },\r\n      // 添加满减\r\n      addManJian() {\r\n        this.manJianDialog.title = '添加满减'\r\n        this.manJianDialog.show = true\r\n      },\r\n      // 编辑满减\r\n      editManJian(data) {\r\n        this.manJianDialog.title = '编辑满减'\r\n        this.manJianDialog.form.title = data.title\r\n        this.manJianDialog.form.full = data.full\r\n        this.manJianDialog.form.reduce = data.reduce\r\n        this.manJianDialog.form.reduce_id = data.reduce_id\r\n        this.manJianDialog.show = true\r\n      },\r\n      // 删除满减\r\n      delManJian(reduce_id) {\r\n        this.$confirm('您确定要删除该满减吗?', '温馨提示', {\r\n          type: 'warning'\r\n        }).then(async () => {\r\n          await delManJian({\r\n            reduce_id\r\n          }).then(() => {\r\n            this.$message.success('删除成功')\r\n            this.tableData.currentPage = 1\r\n            this.getManJianList()\r\n          })\r\n        }).catch(() => {})\r\n      },\r\n      // 获取满减列表\r\n      async getManJianList() {\r\n        await getManJianList({\r\n          room_id: this.roomManage.room_id,\r\n          limit: this.tableData.pageSize,\r\n          page: this.tableData.currentPage\r\n        }).then(data => {\r\n          this.tableData.list = data.list\r\n          this.tableData.total = data.count\r\n        })\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getManJianList()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n</style>\r\n"],"mappings":"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"}]}